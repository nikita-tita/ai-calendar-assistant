# Статус проекта: AI Calendar Assistant

**Дата снимка:** 2026-01-09
**Версия документа:** 1.0

---

## Общая информация

| Параметр | Значение |
|----------|----------|
| **Название** | AI Calendar Assistant |
| **URL** | https://calendar.housler.ru |
| **Репозиторий** | https://github.com/nikita-tita/ai-calendar-assistant |
| **Сервер** | 95.163.227.26 (reg.ru, Ubuntu 24.04) |
| **Стадия** | Production (с техническим долгом) |
| **Дата запуска** | 2025 |

---

## Цель продукта

**Для кого:** Пользователи Telegram, которым нужен умный календарь.

**Что делает:** Telegram-бот и WebApp для управления календарём и задачами на естественном языке (русский). Использует Yandex GPT для понимания команд типа "Встреча завтра в 15:00".

**Ключевая ценность:** Голосовые и текстовые команды вместо ручного ввода событий.

---

## Текущий объём (что реализовано)

### Функциональность

| Функция | Статус | Примечания |
|---------|--------|------------|
| Создание событий (текст) | Работает | Yandex GPT парсинг |
| Создание событий (голос) | Работает | Yandex SpeechKit |
| Batch-создание событий | Работает | "В 10 встреча, в 11 обед" |
| Повторяющиеся события | Работает | Daily/Weekly/Monthly |
| Обновление событий | Работает | По имени или контексту |
| Удаление событий | Работает | Одиночное и массовое |
| Поиск свободного времени | Работает | find_free_slots |
| Задачи (todos) | Работает | Шифрованное хранение |
| WebApp (календарь) | Работает | Telegram Mini App |
| Admin Panel | Работает | 3-пароля / JWT+2FA |
| Аналитика | Работает | SQLite |
| Property Bot | Отключен | Функционал заморожен |

### Технологический стек

| Компонент | Технология |
|-----------|------------|
| Backend | Python 3.11, FastAPI |
| AI/NLP | Yandex GPT, Yandex SpeechKit |
| Календарь | Radicale (CalDAV) |
| Кэш/Rate Limit | Redis |
| База данных | SQLite (analytics) |
| Шифрование | Fernet |
| Фронтенд | Vanilla JS, Tailwind CSS |
| Контейнеризация | Docker Compose |
| Reverse Proxy | Nginx |

---

## Ограничения

### Технические
- Один инстанс (нет HA)
- SQLite не масштабируется
- Property Bot отключен

### Бизнес
- Только русский язык
- Только Telegram (нет веб-доступа без Telegram)

### Правовые
- Персональные данные хранятся на российском сервере (reg.ru)
- GDPR не применим (только РФ пользователи)

---

## Ключевые сценарии

1. **Создание события голосом:** Пользователь → голосовое → STT → LLM → CalDAV → подтверждение
2. **Просмотр календаря:** Открыть WebApp → API → список событий → календарь-вид
3. **Создание задачи:** "Купить молоко" (без времени) → LLM определяет TODO → шифрованное хранение
4. **Утреннее напоминание:** Cron → список событий дня → Telegram сообщение

---

## Интеграции

| Внешняя система | Тип интеграции | Статус |
|-----------------|----------------|--------|
| Telegram Bot API | Webhook | Работает |
| Yandex GPT | REST API | Работает |
| Yandex SpeechKit | REST API | Работает |
| Radicale CalDAV | HTTP | Работает |
| Redis | TCP | Работает |
| Google Calendar | OAuth2 | Не реализовано |

---

## Открытые вопросы и технический долг

### Критический (Blocker)
1. **SEC-001:** Секреты в Git истории — требуется ротация
2. **SEC-002:** SQL Injection в analytics_service.py
3. **INFRA-001:** Бэкапы не автоматизированы

### Высокий (High)
4. **SEC-003:** XSS уязвимости во фронтенде
5. **BIZ-001:** Race condition в calendar cache
6. **TEST-001:** Тестовое покрытие 13%
7. **ARCH-002:** extract_event() — 488 строк

### Средний (Medium)
8. **PERF-001:** Full DOM re-render
9. **DOC-001:** Нет API Reference
10. **INFRA-002:** Prometheus метрики не инструментированы

**Полный список:** см. `FULL_CODE_REVIEW_2026-01-09.md` (45 проблем)

---

## Риски

| Риск | Вероятность | Влияние | Владелец |
|------|-------------|---------|----------|
| Потеря данных (нет бэкапов) | Высокая | Критическое | DevOps |
| Security breach (секреты в Git) | Высокая | Критическое | Security |
| Downtime без диагностики (нет мониторинга) | Средняя | Высокое | DevOps |
| Regression при изменениях (мало тестов) | Высокая | Среднее | QA |

---

## Метрики проекта

| Метрика | Значение |
|---------|----------|
| Строк кода (Python) | ~18,173 |
| Строк тестов | ~2,361 |
| Тестовое покрытие | ~13% |
| Документация (файлов) | 80+ |
| Документация (строк) | ~50,000 |
| Открытых проблем | 45 |
| Критических проблем | 10 |

---

## Следующие шаги

1. **Неделя 1:** Закрыть Blocker-проблемы (SEC-001, SEC-002, INFRA-001)
2. **Неделя 2-4:** Закрыть High-проблемы, настроить мониторинг
3. **Месяц 2-3:** Рефакторинг, тесты, документация

---

*Источник правды: этот документ + BACKLOG.md + FULL_CODE_REVIEW_2026-01-09.md*
