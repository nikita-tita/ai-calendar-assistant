<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Info</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            background: #fff;
        }
        .debug-item {
            margin: 15px 0;
            padding: 12px;
            background: #f5f5f5;
            border-radius: 8px;
            border-left: 4px solid #0088cc;
        }
        h3 {
            margin: 0 0 8px 0;
            color: #0088cc;
        }
        .value {
            font-family: monospace;
            background: #fff;
            padding: 8px;
            border-radius: 4px;
            margin-top: 5px;
            word-break: break-all;
        }
        .timestamp {
            color: #666;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>üêõ Debug Information</h1>
    <p class="timestamp" id="generated"></p>

    <div class="debug-item">
        <h3>üìÖ JavaScript Date</h3>
        <div class="value" id="jsdate"></div>
    </div>

    <div class="debug-item">
        <h3>üïê Timestamp</h3>
        <div class="value" id="timestamp"></div>
    </div>

    <div class="debug-item">
        <h3>üåç Timezone</h3>
        <div class="value" id="timezone"></div>
    </div>

    <div class="debug-item">
        <h3>üì± User Agent</h3>
        <div class="value" id="useragent"></div>
    </div>

    <div class="debug-item">
        <h3>üîó Current URL</h3>
        <div class="value" id="url"></div>
    </div>

    <div class="debug-item">
        <h3>üíæ Cache Status</h3>
        <div class="value" id="cache"></div>
    </div>

    <div class="debug-item">
        <h3>üì≤ Telegram WebApp Info</h3>
        <div class="value" id="tginfo"></div>
    </div>

    <script>
        const now = new Date();

        document.getElementById('generated').textContent = `Generated at: ${now.toISOString()}`;

        document.getElementById('jsdate').innerHTML = `
            <strong>Date:</strong> ${now.getDate()}<br>
            <strong>Month:</strong> ${now.getMonth() + 1} (${now.getMonth()})<br>
            <strong>Year:</strong> ${now.getFullYear()}<br>
            <strong>Full:</strong> ${now.toString()}<br>
            <strong>ISO:</strong> ${now.toISOString()}<br>
            <strong>Locale (RU):</strong> ${now.toLocaleString('ru-RU')}
        `;

        document.getElementById('timestamp').textContent = now.getTime();

        document.getElementById('timezone').innerHTML = `
            <strong>Offset:</strong> ${now.getTimezoneOffset()} minutes<br>
            <strong>String:</strong> ${Intl.DateTimeFormat().resolvedOptions().timeZone}
        `;

        document.getElementById('useragent').textContent = navigator.userAgent;

        document.getElementById('url').innerHTML = `
            <strong>Full URL:</strong> ${window.location.href}<br>
            <strong>Origin:</strong> ${window.location.origin}<br>
            <strong>Params:</strong> ${window.location.search || '(none)'}
        `;

        document.getElementById('cache').innerHTML = `
            <strong>Service Worker:</strong> ${'serviceWorker' in navigator ? 'Supported' : 'Not supported'}<br>
            <strong>Cache API:</strong> ${'caches' in window ? 'Supported' : 'Not supported'}
        `;

        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.ready();
            document.getElementById('tginfo').innerHTML = `
                <strong>Platform:</strong> ${tg.platform || 'unknown'}<br>
                <strong>Version:</strong> ${tg.version || 'unknown'}<br>
                <strong>Color Scheme:</strong> ${tg.colorScheme || 'unknown'}<br>
                <strong>User ID:</strong> ${tg.initDataUnsafe?.user?.id || 'unknown'}<br>
                <strong>Init Data:</strong> ${tg.initData ? 'present' : 'missing'}
            `;
        } else {
            document.getElementById('tginfo').textContent = 'Telegram WebApp not detected (opening outside Telegram?)';
        }

        // Log everything to console
        console.log('=== DEBUG INFO ===');
        console.log('Date:', now);
        console.log('Timestamp:', now.getTime());
        console.log('URL:', window.location.href);
        console.log('User Agent:', navigator.userAgent);
        if (tg) {
            console.log('Telegram Platform:', tg.platform);
            console.log('Telegram Version:', tg.version);
        }
    </script>
</body>
</html>
