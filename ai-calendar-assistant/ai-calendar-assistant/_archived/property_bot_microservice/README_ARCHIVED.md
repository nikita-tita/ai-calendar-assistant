# Property Bot Microservice - –ê–†–•–ò–í

## üì¶ –°—Ç–∞—Ç—É—Å: –ó–ê–ê–†–•–ò–í–ò–†–û–í–ê–ù–û

–≠—Ç–æ—Ç –∫–æ–¥ –±—ã–ª **–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω** –∏ **–æ—Ç–∫–ª—é—á–µ–Ω** –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –±–æ—Ç–∞.

**–î–∞—Ç–∞ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏:** 2025-11-01

---

## üìÅ –ß—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —ç—Ç–æ–º –∞—Ä—Ö–∏–≤–µ

–í–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª **Property Bot** (–±–æ—Ç–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –ø–æ–¥–±–æ—Ä–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏) –±—ã–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω —Å—é–¥–∞.

### –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **property/** - –ø–æ–ª–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ Property Bot
   - `property_handler.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤
   - `property_service.py` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞
   - `property_scoring.py` - —Å–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ –∫–≤–∞—Ä—Ç–∏—Ä (Dream Score)
   - `llm_agent_property.py` - LLM –∞–≥–µ–Ω—Ç –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
   - `search_service.py` - —Å–µ—Ä–≤–∏—Å –ø–æ–∏—Å–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - `feed_loader.py`, `feed_parser.py`, `feed_scheduler.py` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∏–¥–æ–≤
   - –ò –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏...

2. **property.py** - FastAPI —Ä–æ—É—Ç–µ—Ä –¥–ª—è Property API

3. **property_telegram_integration.py** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram

4. **telegram_handler_fixed.py** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è handler —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π Property callbacks

---

## üîß –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏

### –í `app/main.py`:
- ‚úÖ –£–¥–∞–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `from app.routers import property`
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω —Ä–æ—É—Ç–µ—Ä `app.include_router(property.router)`
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω Property feed scheduler –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –í `app/services/telegram_handler.py`:
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã Property –º–æ–¥—É–ª–µ–π
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `PROPERTY_BOT_ENABLED = False`
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/property`
- ‚úÖ –£–¥–∞–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "üè¢ –ü–æ–∏—Å–∫ –Ω–æ–≤–æ—Å—Ç—Ä–æ–µ–∫"
- ‚úÖ –£–¥–∞–ª–µ–Ω –º–µ—Ç–æ–¥ `_handle_property_command()`
- ‚úÖ –£–¥–∞–ª–µ–Ω callback handler `services:property_search`
- ‚úÖ –£–±—Ä–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üè¢ –ü–æ–¥–±–æ—Ä –Ω–æ–≤–æ—Å—Ç—Ä–æ–µ–∫" –∏–∑ –º–µ–Ω—é —Å–µ—Ä–≤–∏—Å–æ–≤

### –í `app/routers/health.py`:
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω Property health check endpoint

---

## üöÄ –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Property Bot

–ß—Ç–æ–±—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–∏—Å–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –∫–∞–∫ **–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å**:

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `property/` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π FastAPI –ø—Ä–æ–µ–∫—Ç
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL –¥–ª—è Property
4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–æ—É—Ç–µ—Ä—ã –∏ —Å–µ—Ä–≤–∏—Å—ã
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π Telegram webhook –¥–ª—è Property Bot

---

## üìã –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å

–ü–æ—Å–ª–µ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ Property Bot, —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏–∑ `requirements.txt` (–µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–º –±–æ—Ç–æ–º):

- `asyncpg` - PostgreSQL –¥—Ä–∞–π–≤–µ—Ä (–µ—Å–ª–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL)
- –õ—é–±—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∏–¥–∞–º–∏ XML/RSS

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û

**–ù–ï –£–î–ê–õ–Ø–ô–¢–ï** —ç—Ç–æ—Ç –∞—Ä—Ö–∏–≤ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏!

–í–µ—Å—å –∫–æ–¥ Property Bot —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π –æ–±—ä–µ–º –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏:
- –ü–∞—Ä—Å–∏–Ω–≥ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –ø–æ–∏—Å–∫–∞ —á–µ—Ä–µ–∑ LLM
- –°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ (Dream Score)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–∏–¥–∞–º–∏ –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–æ–≤
- –õ–æ–≥–∏–∫–∞ –ø–æ–¥–±–æ—Ä–∞ –∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –∫–≤–∞—Ä—Ç–∏—Ä

–≠—Ç–æ—Ç –∫–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ü–µ–Ω–Ω—ã–º –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞.

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –∫–æ–¥—É –∏–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º.

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –±–æ—Ç —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –∏ –Ω–µ –∏–º–µ–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç Property Bot.
