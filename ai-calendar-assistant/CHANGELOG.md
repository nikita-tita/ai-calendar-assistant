# Changelog

–í—Å–µ –≤–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ.

–§–æ—Ä–º–∞—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/).

---

## [2025-12-04] - Admin Panel Session Persistence (Deployed)

### Fixed
- **–°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** ‚Äî –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –∑–∞–Ω–æ–≤–æ
- **–°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–∞–∂–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞** ‚Äî JWT —Ç–æ–∫–µ–Ω—ã –≤–º–µ—Å—Ç–æ in-memory storage
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `sessionStorage` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ, –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏
- **üöÄ DEPLOYED** ‚Äî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ –Ω–∞ –ø—Ä–æ–¥

### Technical
- –§–∞–π–ª—ã: `app/static/admin.html`, `app/routers/admin.py`
- **Frontend**: –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `sessionStorage` –ø–æ–¥ –∫–ª—é—á–æ–º `admin_session_token`
- **Backend**: JWT —Ç–æ–∫–µ–Ω—ã (PyJWT) –≤–º–µ—Å—Ç–æ in-memory dict
  - –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 24 —á–∞—Å–∞
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `JWT_SECRET` –∏–∑ `.env` (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏)
  - Payload: `{mode: "real"|"fake", exp, iat}`
- –ü—Ä–∏ 401 –æ—à–∏–±–∫–µ (–∏—Å—Ç—ë–∫—à–∏–π —Ç–æ–∫–µ–Ω) —Å–µ—Å—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç—Å—è
- **–ö–ª—é—á–µ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: `restoreSession()` —Ç–µ–ø–µ—Ä—å –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω –ü–ï–†–ï–î –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–µ—Å—Å–∏–∏

---

## [2025-12-04] - Error Tracking for Admin Panel

### Added
- **–ù–æ–≤—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫ –≤ analytics** –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
  - `LLM_ERROR` - –æ—à–∏–±–∫–∏ Yandex GPT API
  - `LLM_PARSE_ERROR` - –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON –æ—Ç–≤–µ—Ç–∞
  - `LLM_TIMEOUT` - —Ç–∞–π–º–∞—É—Ç—ã API (30—Å)
  - `CALENDAR_ERROR` - –æ—à–∏–±–∫–∏ Radicale (—Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
  - `STT_ERROR` - –æ—à–∏–±–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–∞
  - `INTENT_UNCLEAR` - –∫–æ–≥–¥–∞ LLM –Ω–µ –ø–æ–Ω—è–ª –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- **API endpoint `/api/admin/errors`** - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∑–∞ N —á–∞—Å–æ–≤:
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `hours` (1-168), `limit` (1-500)
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ç–∏–ø–∞–º
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ fake mode (–ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ)

- **–û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**:
  - –ö–∞—Ä—Ç–æ—á–∫–∞ "–û—à–∏–±–∫–∏" —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞ 24—á
  - –ö–ª–∏–∫ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫
  - Breakdown –æ—à–∏–±–æ–∫ –ø–æ —Ç–∏–ø–∞–º –≤ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–µ
  - –ü–æ–∫–∞–∑ error_message –¥–ª—è –∫–∞–∂–¥–æ–π –æ—à–∏–±–∫–∏

### Technical
- –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
  - `app/models/analytics.py` - –Ω–æ–≤—ã–µ ActionType
  - `app/services/analytics_service.py` - –º–µ—Ç–æ–¥—ã get_errors(), get_error_stats()
  - `app/services/llm_agent_yandex.py` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ LLM –æ—à–∏–±–æ–∫
  - `app/services/calendar_radicale.py` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ calendar –æ—à–∏–±–æ–∫
  - `app/services/telegram_handler.py` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ STT –∏ INTENT_UNCLEAR
  - `app/routers/admin.py` - –Ω–æ–≤—ã–π endpoint /errors
  - `app/static/admin.html` - UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫

### –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ
–¢–µ–ø–µ—Ä—å –≤ –∞–¥–º–∏–Ω–∫–µ –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å:
1. –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏–ª –æ—à–∏–±–∫—É (–∏ –∫–∞–∫—É—é)
2. –ß—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–ª—Å—è —Å–¥–µ–ª–∞—Ç—å
3. –ö–∞–∫–æ–π —Ç–∏–ø –ø—Ä–æ–±–ª–µ–º—ã (API, –ø–∞—Ä—Å–∏–Ω–≥, –∫–∞–ª–µ–Ω–¥–∞—Ä—å, –≥–æ–ª–æ—Å)
4. –°–∫–æ–ª—å–∫–æ "—É—Ç–æ—á–Ω–µ–Ω–∏–π" —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (–ø–ª–æ—Ö–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)

---

## [2025-12-04] - Admin Panel Fix

### Fixed
- **admin.html**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è frontend —Å backend API
  - –§–æ—Ä–º–∞ –ª–æ–≥–∏–Ω–∞ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `/api/admin/verify` (–±—ã–ª–æ: `/login`)
  - –î–æ–±–∞–≤–ª–µ–Ω–æ —Ç—Ä–µ—Ç—å–µ –ø–æ–ª–µ –ø–∞—Ä–æ–ª—è –¥–ª—è 3-—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  - Dashboard –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (`/stats`, `/users`, `/timeline`, `/actions`)
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (`data.token` –≤–º–µ—Å—Ç–æ `data.session_token`)

### Added
- **admin.py**: –ù–æ–≤—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
  - `GET /api/admin/timeline` - –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä—è–¥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞ N —á–∞—Å–æ–≤
  - `GET /api/admin/actions` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- **telegram_handler.py**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –∫–∞–ª–µ–Ω–¥–∞—Ä—è –≤ analytics
  - `event_create` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞
  - `event_update` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
  - `event_delete` - —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è

### Technical
- –§–∞–π–ª—ã: `admin.html`, `app/routers/admin.py`, `app/services/telegram_handler.py`
- –¢–µ–ø–µ—Ä—å –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ analytics_service
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `/var/lib/calendar-bot/analytics_data.json.enc` (—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ)

### API Reference
```
POST /api/admin/verify    - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (3 –ø–∞—Ä–æ–ª—è)
GET  /api/admin/stats     - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
GET  /api/admin/users     - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET  /api/admin/users/{id}/dialog - –î–∏–∞–ª–æ–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET  /api/admin/users/{id}/events - –°–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET  /api/admin/timeline  - –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
GET  /api/admin/actions   - –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
GET  /api/admin/health    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
```

---

## [2025-12-04] - System Documentation

### Added
- **SYSTEM_GUIDE.md** ‚Äî –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ (500+ —Å—Ç—Ä–æ–∫)
  - –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏
  - –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
  - Docker –∫–æ–º–∞–Ω–¥—ã –∏ –ø—Ä–∞–≤–∏–ª–∞
  - Git workflow
  - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ smoke-—Ç–µ—Å—Ç—ã
  - Troubleshooting

### Technical
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ DEPLOY.md, CLAUDE.md –∏ docs/
- –°–ª—É–∂–∏—Ç –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º

---

## [2025-12-04] - Fix Todos Data Loss (Critical)

### Fixed
- **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì: –ü–æ—Ç–µ—Ä—è –∑–∞–¥–∞—á –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**
- –ü—É—Ç—å `/var/lib/calendar-bot/` –Ω–µ –±—ã–ª –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ Docker volume
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º `docker-compose build --no-cache` —Ç–µ—Ä—è–ª–∏—Å—å:
  - –í—Å–µ –∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`/var/lib/calendar-bot/todos/`)
  - –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (`/var/lib/calendar-bot/.encryption_key`)
  - –î–∞–∂–µ –µ—Å–ª–∏ —Ñ–∞–π–ª—ã –±—ã–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, –∫–ª—é—á –±—ã–ª –Ω–æ–≤—ã–π = —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞

### Added
- **Docker volume `bot-data`** ‚Äî –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞
- Mount: `bot-data:/var/lib/calendar-bot`

### Technical
- –§–∞–π–ª: `docker-compose.secure.yml`
- –ü—Ä–∏—á–∏–Ω–∞: TodosService –∏ EncryptedStorage –∏—Å–ø–æ–ª—å–∑—É—é—Ç `/var/lib/calendar-bot/`
- –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–ª–µ–Ω named volume –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
- –≠—Ç–æ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–æ–Ω–∏ –≤ Radicale volume)

### Why this happened
```
# –ë—ã–ª–æ (–ù–ï –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å):
volumes:
  - ./logs:/app/logs
  - ./data:/app/data
  - ./credentials:/app/credentials
  # /var/lib/calendar-bot –ù–ï –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª—Å—è!

# –°—Ç–∞–ª–æ (—Ç–µ–ø–µ—Ä—å –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è):
volumes:
  - ./logs:/app/logs
  - ./data:/app/data
  - ./credentials:/app/credentials
  - bot-data:/var/lib/calendar-bot  # <-- FIX
```

---

## [2025-12-04] - Automated Smoke Testing

### Added
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π smoke-—Ç–µ—Å—Ç** ‚Äî `scripts/monitoring/smoke_test.sh`
- **–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á—ë—Ç–æ–≤ –≤ Telegram** ‚Äî –±–æ—Ç @dogovorarenda_bot
- **10 –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å–∏—Å—Ç–µ–º—ã:**
  - Health endpoint
  - WebApp endpoint
  - Static files –≤–µ—Ä—Å–∏—è
  - Events/Todos API auth (–∑–∞—â–∏—Ç–∞ HMAC)
  - SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (—Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è)
  - Response time
  - Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (3/3 healthy)
  - –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö –∑–∞ 6—á
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
- **Cron —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ** ‚Äî 10:00 –∏ 17:00 –ø–æ –ú–æ—Å–∫–≤–µ
- **–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é** ‚Äî `docs/06-testing/SMOKE_TEST_GUIDE.md`

### Technical
- Chat ID: 2296243 (@nikita_tita)
- –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ cron: `scripts/monitoring/setup_cron.sh`
- –õ–æ–≥–∏: `/var/log/smoke_test.log`

### Usage
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ –≤—Ä—É—á–Ω—É—é
SMOKE_TEST_CHAT_ID=2296243 ./scripts/monitoring/smoke_test.sh

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ cron –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
./scripts/monitoring/setup_cron.sh
```

---

## [2025-12-04] - Docker Architecture Cleanup

### Changed
- **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è docker-compose** - —Ç–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ñ–∞–π–ª `docker-compose.secure.yml`
- **–ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** - `telegram-bot` –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏ FastAPI, –∏ Telegram polling bot
- **–ò–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤** - `telegram-bot`, `calendar-redis`, `radicale-calendar`
- **Healthcheck** - HTTP –ø—Ä–æ–≤–µ—Ä–∫–∞ `/health` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (FastAPI —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 8000)

### Removed
- `docker-compose.yml` - —É–¥–∞–ª—ë–Ω (–±—ã–ª –¥—É–±–ª–µ–º)
- `docker-compose.polling.yml` - —É–¥–∞–ª—ë–Ω (—É—Å—Ç–∞—Ä–µ–ª)
- `docker-compose.production.yml` - —É–¥–∞–ª—ë–Ω (—É—Å—Ç–∞—Ä–µ–ª)
- –§–∞–π–ª—ã –∏–∑ `app/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ - —É–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏ docker-compose

### Technical
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `telegram-bot` —Å `Dockerfile.bot` + `start.sh`
- `start.sh` –∑–∞–ø—É—Å–∫–∞–µ—Ç uvicorn (FastAPI) –∏ python run_polling.py –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- Healthcheck –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `/health` endpoint —á–µ—Ä–µ–∑ curl

### Deployment
```bash
# –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–µ–ø–ª–æ—è
ssh -i ~/.ssh/id_housler root@91.229.8.221 '
  cd /root/ai-calendar-assistant/ai-calendar-assistant &&
  git pull origin main &&
  docker-compose -f docker-compose.secure.yml build --no-cache telegram-bot &&
  docker-compose -f docker-compose.secure.yml up -d telegram-bot
'
```

---

## [2025-12-04] - Data Protection & External Volume

### Fixed
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–æ–±—ã—Ç–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è** - 447 —Å–æ–±—ã—Ç–∏–π –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ Docker volume
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –¥–µ–ø–ª–æ–µ** - –¥–∞–Ω–Ω—ã–µ —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–æ –≤–Ω–µ—à–Ω–µ–º volume

### Added
- `scripts/backup-radicale.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø –¥–∞–Ω–Ω—ã—Ö Radicale
- `scripts/restore-radicale.sh` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
- `scripts/safe-deploy.sh` - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ–ø–ª–æ–π —Å –∞–≤—Ç–æ–±—ç–∫–∞–ø–æ–º
- –í–Ω–µ—à–Ω–∏–π Docker volume `calendar-radicale-data` –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö

### Changed
- **docker-compose.secure.yml** - Radicale —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç external volume
- Volume `calendar-radicale-data` –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ `docker-compose down -v`

### Technical
- –ü—Ä–∏—á–∏–Ω–∞ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö: Docker —Å–æ–∑–¥–∞–≤–∞–ª –Ω–æ–≤—ã–π volume –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏–º–µ–Ω–∏ –ø—Ä–æ–µ–∫—Ç–∞
- –°—Ç–∞—Ä—ã–π volume: `ai-calendar-assistant_radicale_data` (–ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ)
- –ù–æ–≤—ã–π volume: `ai-calendar-assistant_radicale-data` (–¥–µ—Ñ–∏—Å)
- –†–µ—à–µ–Ω–∏–µ: –≤–Ω–µ—à–Ω–∏–π volume —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º `calendar-radicale-data`

### Backup Commands
```bash
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
./scripts/backup-radicale.sh

# –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±—ç–∫–∞–ø—ã
./scripts/restore-radicale.sh --list

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞
./scripts/restore-radicale.sh --latest

# –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ–ø–ª–æ–π (—Å –∞–≤—Ç–æ–±—ç–∫–∞–ø–æ–º)
./scripts/safe-deploy.sh
```

---

## [2025-12-04] - Production Cleanup & Git-only Workflow

### Changed
- **–ü–æ–ª–Ω–∞—è —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è production —Å–µ—Ä–≤–µ—Ä–∞** - —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ –¥—É–±–ª–∏–∫–∞—Ç—ã —Ñ–∞–π–ª–æ–≤
- **Git-only workflow** - —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ–º –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ git, –±–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–ø–∏–π
- –ß–∏—Å—Ç—ã–π git clone –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –±–µ–∑ –ª–∏—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤

### Added
- `Dockerfile.bot` –¥–æ–±–∞–≤–ª–µ–Ω –≤ git (—Ä–∞–Ω—å—à–µ –±—ã–ª —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- `CLAUDE.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
- –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π `DEPLOY.md` —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏

### Technical
- –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: `/root/ai-calendar-assistant/ai-calendar-assistant/`
- Docker –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–∑ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ë—ç–∫–∞–ø —Å—Ç–∞—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `/root/backup_before_cleanup_20251204/`

### Deployment
```bash
# –ù–æ–≤—ã–π –¥–µ–ø–ª–æ–π (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)
ssh -i ~/.ssh/id_housler root@91.229.8.221 '
  cd /root/ai-calendar-assistant/ai-calendar-assistant &&
  git pull origin main &&
  docker-compose -f docker-compose.secure.yml build --no-cache telegram-bot &&
  docker-compose -f docker-compose.secure.yml up -d telegram-bot
'
```

---

## [2025-12-04] - WebApp Fixes v1

### Fixed
- **–°–∫—Ä–æ–ª–ª –∫ "–°–µ–≥–æ–¥–Ω—è"**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–ª–∞—Å—å –∫ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏. –¢–µ–ø–µ—Ä—å —Å–∫—Ä–æ–ª–ª –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ.
- **–ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –≤ WebApp.

### Added
- `initialScrollDone` —Ñ–ª–∞–≥ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞
- `openNewTodo()` —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
- `createTodo()` —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è POST-–∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ API —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
- –ö–Ω–æ–ø–∫–∞ "+ –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞" –≤ —Å–ø–∏—Å–∫–µ –∑–∞–¥–∞—á
- –£—Å–ª–æ–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å" / "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" –≤ —Ñ–æ—Ä–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `scripts/deploy_sync.sh` - —Å–∫—Ä–∏–ø—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ git —Å docker build context

### Technical
- –í–µ—Ä—Å–∏—è WebApp: `2025-12-04-v1`
- –§–∞–π–ª: `app/static/index.html`

### Deployment Notes
–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –µ—Å—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
- Git repo: `/root/ai-calendar-assistant/ai-calendar-assistant/`
- Docker context: `/root/ai-calendar-assistant/`

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `deploy_sync.sh` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:
```bash
ssh root@91.229.8.221 '/root/ai-calendar-assistant/deploy_sync.sh'
```

---

## [2025-12-03] - Repository Cleanup

### Changed
- –£–¥–∞–ª–µ–Ω–æ 518 –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- –†–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

---

## [2025-11-29] - Todos Integration

### Added
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á (todos) –≤ –æ—Å–Ω–æ–≤–Ω–æ–π WebApp
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ `todos.html` –∏ `index.html` –≤ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –¢–∞–±—ã "–°–æ–±—ã—Ç–∏—è" –∏ "–ó–∞–¥–∞—á–∏" –≤ WebApp

---

## [2025-10-28] - WebApp Click Fix

### Fixed
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∫–æ–≥–¥–∞ –∫–ª–∏–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏
- –§—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ (`window.viewEvent`, etc.)
- –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### Technical
- –í–µ—Ä—Å–∏—è: `2025-10-28-17:30`
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/03-features/webapp/WEBAPP_FIX_REPORT.md`

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ä—Å–∏–π WebApp

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|----------|
| 2025-12-04-v1 | 2025-12-04 | –§–∏–∫—Å —Å–∫—Ä–æ–ª–ª–∞ + —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á |
| 2025-11-29-16:00 | 2025-11-29 | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è todos |
| 2025-10-28-17:30 | 2025-10-28 | –§–∏–∫—Å –∫–ª–∏–∫–æ–≤ |

---

## –ö–∞–∫ –¥–æ–±–∞–≤–ª—è—Ç—å –∑–∞–ø–∏—Å–∏

–ü—Ä–∏ –≤–Ω–µ—Å–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∑–∞–ø–∏—Å—å –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

```markdown
## [YYYY-MM-DD] - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

### Added (–Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)
- –û–ø–∏—Å–∞–Ω–∏–µ

### Changed (–∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º)
- –û–ø–∏—Å–∞–Ω–∏–µ

### Fixed (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤)
- –û–ø–∏—Å–∞–Ω–∏–µ

### Removed (—É–¥–∞–ª—ë–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
- –û–ø–∏—Å–∞–Ω–∏–µ

### Technical (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏)
- –í–µ—Ä—Å–∏—è, —Ñ–∞–π–ª—ã, –∫–æ–º–∞–Ω–¥—ã –¥–µ–ø–ª–æ—è
```
