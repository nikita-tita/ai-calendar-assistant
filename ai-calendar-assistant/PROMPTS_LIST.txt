# üìù –°–ü–ò–°–û–ö –í–°–ï–• –ü–†–û–ú–ü–¢–û–í –í –°–ò–°–¢–ï–ú–ï AI CALENDAR ASSISTANT

–î–∞—Ç–∞: 24 –Ω–æ—è–±—Ä—è 2025
–ü—Ä–æ–µ–∫—Ç: AI Calendar Assistant (Yandex GPT Integration)

================================================================================
                          –°–ò–°–¢–ï–ú–ù–´–ï –ü–†–û–ú–ü–¢–´
================================================================================

1. –ë–ê–ó–û–í–´–ô –°–ò–°–¢–ï–ú–ù–´–ô –ü–†–û–ú–ü–¢ (base_system_prompt)
   –§–∞–π–ª: app/services/llm_agent_yandex.py, —Å—Ç—Ä–æ–∫–∏ 37-212
   –†–∞–∑–º–µ—Ä: ~3500 —Ç–æ–∫–µ–Ω–æ–≤
   –Ø–∑—ã–∫: –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π)
   
   –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:
   - –†–æ–ª—å –∏ –∑–∞–¥–∞—á–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ 10 —Ç–∏–ø–æ–≤ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ (create, todo, query, update, delete, etc.)
   - –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑–ª–∏—á–∏—è —Å–æ–±—ã—Ç–∏–π (events) vs –∑–∞–¥–∞—á (tasks)
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ü—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–æ–±—ã—Ç–∏–π (recurring)
   - –û–ø–µ—Ä–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è
   - –ü–∞–∫–µ—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (batch)
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ
   - JSON schema –¥–ª—è –æ—Ç–≤–µ—Ç–∞

   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: –í –ö–ê–ñ–î–û–ú –∑–∞–ø—Ä–æ—Å–µ –∫ Yandex GPT


2. –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ï –Ø–ó–´–ö–û–í–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò (lang_instructions)
   –§–∞–π–ª: app/services/llm_agent_yandex.py, —Å—Ç—Ä–æ–∫–∏ 599-667
   –†–∞–∑–º–µ—Ä: ~1000 —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ —è–∑—ã–∫
   –Ø–∑—ã–∫–∏: ru, en, es, ar
   
   –î–ª—è –†–£–°–°–ö–û–ì–û —è–∑—ã–∫–∞ (lang_instructions['ru']):
   - –¢–ï–ö–£–©–ê–Ø –î–ê–¢–ê –ò –í–†–ï–ú–Ø —Å timezone
   - –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞—Ç ("–∑–∞–≤—Ç—Ä–∞", "–ø–æ—Å–ª–µ–∑–∞–≤—Ç—Ä–∞", "—á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é")
   - –ë–ª–∏–∂–∞–π—à–∏–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ—Ç–≤–µ—á–∞—Ç—å –ù–ê –†–£–°–°–ö–û–ú —è–∑—ã–∫–µ
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: "–ò—Å–ø–æ–ª—å–∑—É–π –¢–û–ß–ù–û —ç—Ç–∏ –¥–∞—Ç—ã!"
   
   –î–ª—è –ê–ù–ì–õ–ò–ô–°–ö–û–ì–û —è–∑—ã–∫–∞ (lang_instructions['en']):
   - CURRENT DATE AND TIME —Å timezone
   - Examples of relative dates ("tomorrow", "day after tomorrow")
   - Next weekdays from current date
   - Instruction to respond IN ENGLISH
   
   –î–ª—è –ò–°–ü–ê–ù–°–ö–û–ì–û –∏ –ê–†–ê–ë–°–ö–û–ì–û: –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
   
   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ –±–∞–∑–æ–≤–æ–º—É –ø—Ä–æ–º–ø—Ç—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞


3. EVENTS PREFIX (existing_events context)
   –§–∞–π–ª: app/services/llm_agent_yandex.py, —Å—Ç—Ä–æ–∫–∏ 571-588
   –†–∞–∑–º–µ—Ä: ~200-500 —Ç–æ–∫–µ–Ω–æ–≤ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–±—ã—Ç–∏–π)
   
   –§–æ—Ä–º–∞—Ç:
   ```
   <existing_calendar_events>
   Event: –í—Å—Ç—Ä–µ—á–∞ —Å –õ–µ–Ω–æ–π
   Time: 24.11.2025 15:00
   ID: abc-123-def
   
   Event: –ü–æ–∫–∞–∑ –∫–≤–∞—Ä—Ç–∏—Ä—ã
   Time: 25.11.2025 10:00
   ID: xyz-456
   </existing_calendar_events>
   
   CRITICAL: For update/delete operations:
   - Find the event by title/description
   - COPY the exact ID value
   ```
   
   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: –î–ª—è UPDATE –∏ DELETE –æ–ø–µ—Ä–∞—Ü–∏–π, –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π


4. JSON INSTRUCTIONS (json_instructions)
   –§–∞–π–ª: app/services/llm_agent_yandex.py, —Å—Ç—Ä–æ–∫–∏ 777-795
   –†–∞–∑–º–µ—Ä: ~500 —Ç–æ–∫–µ–Ω–æ–≤
   –Ø–∑—ã–∫–∏: ru, en, es, ar
   
   –î–ª—è –†–£–°–°–ö–û–ì–û:
   ```
   –í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û JSON —Å –ø–æ–ª—è–º–∏ —Ñ—É–Ω–∫—Ü–∏–∏ set_calendar_action. –°—Ö–µ–º–∞ —Ñ—É–Ω–∫—Ü–∏–∏:
   {
     "name": "set_calendar_action",
     "parameters": { ... }
   }
   
   JSON –æ—Ç–≤–µ—Ç:
   ```
   
   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ –ø—Ä–æ–º–ø—Ç–µ


5. FUNCTION SCHEMA (function_schema)
   –§–∞–π–ª: app/services/llm_agent_yandex.py, —Å—Ç—Ä–æ–∫–∏ 695-775
   –†–∞–∑–º–µ—Ä: ~500 —Ç–æ–∫–µ–Ω–æ–≤
   
   –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É JSON –æ—Ç–≤–µ—Ç–∞:
   - intent (enum: create, todo, query, update, delete, ...)
   - title, start_time, end_time, duration_minutes
   - location, attendees
   - event_id (enum: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ existing_events)
   - clarify_question
   - query_date_start, query_date_end
   - recurrence_type, recurrence_end_date, recurrence_days
   - batch_actions
   - delete_criteria_title_contains
   
   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞


================================================================================
                      –°–ü–ï–¶–ò–ê–õ–ò–ó–ò–†–û–í–ê–ù–ù–´–ï –ü–†–û–ú–ü–¢–´
================================================================================

6. SCHEDULE FORMAT DETECTION (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è LLM)
   –§–∞–π–ª: app/services/llm_agent_yandex.py, —Å—Ç—Ä–æ–∫–∏ 214-478
   
   –≠—Ç–æ –ù–ï –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM, –∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä.
   –î–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω:
   ```
   —Ç–∞–π–º–∏–Ω–≥ –Ω–∞ 25 –Ω–æ—è–±—Ä—è:
   12:45-13:00 –ü—Ä–∏–µ–∑–¥, –∑–∞—Å–µ–ª–µ–Ω–∏–µ
   13:00-13:30 –ö–æ—Ñ–µ-–±—Ä–µ–π–∫
   ```
   
   –ï—Å–ª–∏ –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω ‚Üí –ø–∞—Ä—Å–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –ë–ï–ó –≤—ã–∑–æ–≤–∞ LLM
   –≠–∫–æ–Ω–æ–º–∏—è: ~2000 —Ç–æ–∫–µ–Ω–æ–≤


7. CONVERSATION HISTORY (–¥–ª—è clarify –¥–∏–∞–ª–æ–≥–æ–≤)
   –§–∞–π–ª: app/services/telegram_handler.py, —Å—Ç—Ä–æ–∫–∏ 868-879
   –†–∞–∑–º–µ—Ä: ~100-300 —Ç–æ–∫–µ–Ω–æ–≤
   
   –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è clarify-–¥–∏–∞–ª–æ–≥–æ–≤:
   ```
   [
     {"role": "user", "content": "–ü–µ—Ä–µ–Ω–µ—Å–∏ –≤—Å—Ç—Ä–µ—á—É"},
     {"role": "assistant", "content": "–ö–∞–∫—É—é –∏–º–µ–Ω–Ω–æ –≤—Å—Ç—Ä–µ—á—É?"}
   ]
   ```
   
   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: –¢–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç–≤–µ—Ç–µ –Ω–∞ clarify –≤–æ–ø—Ä–æ—Å

================================================================================
                          –§–ò–ù–ê–õ–¨–ù–´–ô –ü–†–û–ú–ü–¢
================================================================================

8. FULL PROMPT (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Yandex GPT)
   –§–∞–π–ª: app/services/llm_agent_yandex.py, —Å—Ç—Ä–æ–∫–∏ 797-802
   
   –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
   ```
   {formatted_base_prompt}
   
   {lang_instructions[language]}
   
   {events_prefix + user_text}  # –µ—Å–ª–∏ –µ—Å—Ç—å existing_events
   
   {json_instructions[language]}
   ```
   
   –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
   1. –ë–∞–∑–æ–≤—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (~3500 —Ç–æ–∫–µ–Ω–æ–≤)
   2. –Ø–∑—ã–∫–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (~1000 —Ç–æ–∫–µ–Ω–æ–≤)
   3. Existing events context (~0-500 —Ç–æ–∫–µ–Ω–æ–≤)
   4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å (~50 —Ç–æ–∫–µ–Ω–æ–≤)
   5. JSON –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (~500 —Ç–æ–∫–µ–Ω–æ–≤)
   
   –ò–¢–û–ì–û: ~5000-5500 —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –≤—Ö–æ–¥


================================================================================
                      –ü–†–û–ú–ü–¢–´ –î–õ–Ø –†–ê–ó–ù–´–• –ò–ù–¢–ï–ù–¢–û–í
================================================================================

9. CREATE EVENT PROMPT (–Ω–µ—è–≤–Ω—ã–π, —á–µ—Ä–µ–∑ –±–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç)
   –ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
   - "Specific time mentioned" ‚Üí intent="create"
   - "Always return time in ISO 8601 format"
   - "Default duration is 60 minutes"
   
   –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞: "–í—Å—Ç—Ä–µ—á–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 15:00"
   –û–∂–∏–¥–∞–µ–º—ã–π JSON:
   ```json
   {
     "intent": "create",
     "title": "–í—Å—Ç—Ä–µ—á–∞",
     "start_time": "2025-11-25T15:00:00+03:00",
     "end_time": "2025-11-25T16:00:00+03:00"
   }
   ```


10. TODO PROMPT (–Ω–µ—è–≤–Ω—ã–π, —á–µ—Ä–µ–∑ –±–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç)
    –ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
    - "Action verbs WITHOUT specific time" ‚Üí intent="todo"
    - "CRITICAL: If no time specified ‚Üí ALWAYS use intent='todo'"
    - "start_time and end_time should be NULL"
    
    –ü—Ä–∏–º–µ—Ä: "–ü–æ–∑–≤–æ–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É"
    –û–∂–∏–¥–∞–µ–º—ã–π JSON:
    ```json
    {
      "intent": "todo",
      "title": "–ü–æ–∑–≤–æ–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É"
    }
    ```


11. QUERY PROMPT (–Ω–µ—è–≤–Ω—ã–π)
    –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
    - "For 'this week' queries: query_date_start=today, query_date_end=today+7"
    
    –ü—Ä–∏–º–µ—Ä: "–ß—Ç–æ —É –º–µ–Ω—è –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ?"
    JSON:
    ```json
    {
      "intent": "query",
      "query_date_start": "2025-11-24T00:00:00+03:00",
      "query_date_end": "2025-12-01T23:59:59+03:00"
    }
    ```


12. RECURRING EVENT PROMPT (–Ω–µ—è–≤–Ω—ã–π)
    –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
    - "For 'every day' ‚Üí recurrence_type='daily'"
    - "WITHOUT specific period ‚Üí recurrence_end_date = end_of_year"
    - "For 'for 3 days' ‚Üí recurrence_end_date = today + 3 days"
    
    –ü—Ä–∏–º–µ—Ä: "–ë–µ–≥ –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ –≤ 9 —á–∞—Å–æ–≤"
    JSON:
    ```json
    {
      "intent": "create_recurring",
      "title": "–ë–µ–≥",
      "start_time": "09:00",
      "recurrence_type": "daily",
      "recurrence_end_date": "2025-12-31"
    }
    ```


13. BATCH OPERATIONS PROMPT (–Ω–µ—è–≤–Ω—ã–π)
    –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
    - "When MULTIPLE events/tasks with connectors ('–ø–æ—Ç–æ–º'), create batch_actions"
    - "Parse each part separately"
    
    –ü—Ä–∏–º–µ—Ä: "–í 17 –≤—Å—Ç—Ä–µ—á–∞, –ø–æ—Ç–æ–º –≤ 19 —É–∂–∏–Ω"
    JSON:
    ```json
    {
      "intent": "batch_confirm",
      "batch_actions": [
        {"intent": "create", "title": "–í—Å—Ç—Ä–µ—á–∞", "start_time": "17:00"},
        {"intent": "create", "title": "–£–∂–∏–Ω", "start_time": "19:00"}
      ]
    }
    ```


14. DELETE BY CRITERIA PROMPT (–Ω–µ—è–≤–Ω—ã–π)
    –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
    - "For 'delete all X' ‚Üí intent='delete_by_criteria'"
    - "With delete_criteria_title_contains field"
    
    –ü—Ä–∏–º–µ—Ä: "–£–¥–∞–ª–∏ –≤—Å–µ —É—Ç—Ä–µ–Ω–Ω–∏–µ —Ä–∏—Ç—É–∞–ª—ã"
    JSON:
    ```json
    {
      "intent": "delete_by_criteria",
      "delete_criteria_title_contains": "—É—Ç—Ä–µ–Ω–Ω"
    }
    ```


15. UPDATE EVENT PROMPT (—Å existing_events)
    –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
    - "Find event by matching title/description"
    - "COPY the exact ID value - NEVER use 'unknown'"
    
    –ü—Ä–æ–º–ø—Ç –≤–∫–ª—é—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π + –∑–∞–ø—Ä–æ—Å
    
    –ü—Ä–∏–º–µ—Ä: "–ü–µ—Ä–µ–Ω–µ—Å–∏ –≤—Å—Ç—Ä–µ—á—É —Å –õ–µ–Ω–æ–π –Ω–∞ 16:00"
    JSON:
    ```json
    {
      "intent": "update",
      "event_id": "abc-123-def",
      "start_time": "2025-11-24T16:00:00+03:00"
    }
    ```


16. CLARIFY PROMPT (–Ω–µ—è–≤–Ω—ã–π, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è LLM)
    –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
    - "If information is insufficient - use intent=clarify"
    - "clarify_question should be on user's language"
    
    –ö–æ–≥–¥–∞: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
    
    JSON:
    ```json
    {
      "intent": "clarify",
      "clarify_question": "–ö–∞–∫—É—é –∏–º–µ–Ω–Ω–æ –≤—Å—Ç—Ä–µ—á—É –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏?"
    }
    ```


================================================================================
                      –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –ü–†–û–ú–ü–¢–´
================================================================================

17. YEAR CLARIFICATION (–¥–ª—è schedule format)
    –§–∞–π–ª: app/services/llm_agent_yandex.py, —Å—Ç—Ä–æ–∫–∏ 256-279
    
    –ö–æ–≥–¥–∞ –¥–∞—Ç–∞ –≤ –ø—Ä–æ—à–ª–æ–º, —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None,
    –∏ LLM –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é:
    ```
    DATE AMBIGUITY for schedule format:
    If date like "23 –æ–∫—Ç—è–±—Ä—è" is in the PAST, ASK for clarification
    Example: "–£—Ç–æ—á–Ω–∏—Ç–µ: —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ 23 –æ–∫—Ç—è–±—Ä—è 2025 –∏–ª–∏ 2026 –≥–æ–¥–∞?"
    ```


18. TIME INPUT VALIDATION (–Ω–µ LLM, –ª–æ–∫–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è)
    –§–∞–π–ª: app/services/telegram_handler.py, —Å—Ç—Ä–æ–∫–∏ 779-814
    
    –î–ª—è settings (–≤—Ä–µ–º—è —É—Ç—Ä–µ–Ω–Ω–µ–π —Å–≤–æ–¥–∫–∏, —Ç–∏—Ö–∏–µ —á–∞—Å—ã):
    –ü–∞—Ç—Ç–µ—Ä–Ω: `^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$`
    
    –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LLM, –ª–æ–∫–∞–ª—å–Ω—ã–π regex


================================================================================
                          SUMMARY
================================================================================

–í–°–ï–ì–û –ü–†–û–ú–ü–¢–û–í: 18
- –°–∏—Å—Ç–µ–º–Ω—ã—Ö: 5 (–±–∞–∑–æ–≤—ã–π + —è–∑—ã–∫–æ–≤—ã–µ + schema + –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ + events)
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö: 2 (schedule detection, conversation history)
- –ù–µ—è–≤–Ω—ã—Ö (—á–µ—Ä–µ–∑ –±–∞–∑–æ–≤—ã–π): 9 (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ intent —Ç–∏–ø–∞)
- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö: 2 (year clarification, time validation)

–û–ë–©–ò–ô –†–ê–ó–ú–ï–† –ü–†–û–ú–ü–¢–û–í:
- –ë–∞–∑–æ–≤—ã–π: ~3500 —Ç–æ–∫–µ–Ω–æ–≤
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç: ~1000 —Ç–æ–∫–µ–Ω–æ–≤
- Events context: ~0-500 —Ç–æ–∫–µ–Ω–æ–≤
- Function schema: ~500 —Ç–æ–∫–µ–Ω–æ–≤
- User request: ~50 —Ç–æ–∫–µ–Ω–æ–≤
- –ò–¢–û–ì–û –ù–ê –ó–ê–ü–†–û–°: ~5000-5500 —Ç–æ–∫–µ–Ω–æ–≤

–ö–õ–Æ–ß–ï–í–´–ï –§–ê–ô–õ–´:
1. app/services/llm_agent_yandex.py (1259 —Å—Ç—Ä–æ–∫) - –≤—Å–µ –ø—Ä–æ–º–ø—Ç—ã
2. app/services/telegram_handler.py (1500+ —Å—Ç—Ä–æ–∫) - –æ–±—Ä–∞–±–æ—Ç–∫–∞
3. app/schemas/events.py - EventDTO, IntentType

–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø:
- YANDEX_GPT_ARCHITECTURE.md - –ø–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- YANDEX_GPT_PROMPTS_EXAMPLES.md - –≤—Å–µ –ø—Ä–∏–º–µ—Ä—ã
- YANDEX_GPT_SUMMARY.md - –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ
- YANDEX_GPT_FLOW_DIAGRAM.md - –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
- README_YANDEX_GPT.md - –≥–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å

================================================================================

–°–æ–∑–¥–∞–Ω–æ: Claude Code
–î–∞—Ç–∞: 24 –Ω–æ—è–±—Ä—è 2025
