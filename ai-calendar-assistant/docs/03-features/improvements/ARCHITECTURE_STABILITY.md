# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–π

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ Property Bot –≤–æ–∑–Ω–∏–∫–∞—é—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –≤ Calendar Bot:
- –õ–æ–º–∞–µ—Ç—Å—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –ü–æ—è–≤–ª—è—é—Ç—Å—è —Å—Ç–∞—Ä—ã–µ –±–∞–≥–∏
- –ö–∞–ª–µ–Ω–¥–∞—Ä—å –æ—Ç–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## –†–µ—à–µ–Ω–∏–µ: –ú–æ–¥—É–ª—å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è

### 1. –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Main Application (FastAPI)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ              ‚îÇ
           ‚ñº              ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Calendar ‚îÇ    ‚îÇ Property ‚îÇ
    ‚îÇ  Module  ‚îÇ    ‚îÇ  Module  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ               ‚îÇ
         ‚ñº               ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Radicale ‚îÇ    ‚îÇ  SQLite  ‚îÇ
    ‚îÇ  CalDAV  ‚îÇ    ‚îÇ  + APIs  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∞–≤–∏–ª–∞:**
- ‚úÖ –ú–æ–¥—É–ª–∏ –ù–ï –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
- ‚úÖ –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∏–º–µ–µ—Ç —Å–≤–æ—é –ë–î/—Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- ‚úÖ –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ —Ç–æ–ª—å–∫–æ –≤ `main.py`
- ‚úÖ Telegram handler —Ä–æ—É—Ç–∏—Ç –ø–æ —Ä–µ–∂–∏–º—É

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
app/
‚îú‚îÄ‚îÄ main.py                      # –¢–û–õ–¨–ö–û —Ä–æ—É—Ç–∏–Ω–≥, –Ω–∏–∫–∞–∫–æ–π –ª–æ–≥–∏–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ routers/
‚îÇ   ‚îú‚îÄ‚îÄ telegram.py              # –û–±—â–∏–π webhook
‚îÇ   ‚îú‚îÄ‚îÄ events.py                # ‚úÖ Calendar API (–ù–ï –¢–†–û–ì–ê–¢–¨!)
‚îÇ   ‚îî‚îÄ‚îÄ property.py              # ‚ûï Property API (–Ω–æ–≤–æ–µ)
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ calendar/                # ‚úÖ Calendar module
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar_radicale.py # ‚úÖ –ù–ï –¢–†–û–ì–ê–¢–¨!
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llm_agent_yandex.py  # ‚úÖ –ù–ï –¢–†–û–ì–ê–¢–¨!
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ event_reminders.py   # ‚úÖ –ù–ï –¢–†–û–ì–ê–¢–¨!
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ property/                # ‚ûï Property module (–Ω–æ–≤–æ–µ)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ property_service.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ property_scoring.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ property_handler.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ llm_agent_property.py
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ telegram_handler.py      # üîß –†–æ—É—Ç–µ—Ä –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
‚îÇ
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ analytics.py             # ‚úÖ Calendar models
‚îÇ   ‚îî‚îÄ‚îÄ property.py              # ‚ûï Property models
‚îÇ
‚îî‚îÄ‚îÄ schemas/
    ‚îú‚îÄ‚îÄ events.py                # ‚úÖ Calendar schemas
    ‚îî‚îÄ‚îÄ property.py              # ‚ûï Property schemas
```

### 3. Telegram Handler - –¢–û–õ–¨–ö–û —Ä–æ—É—Ç–∏–Ω–≥

**–§–∞–π–ª:** `app/services/telegram_handler.py`

```python
class TelegramHandler:
    """–¢–û–õ–¨–ö–û —Ä–æ—É—Ç–∏–Ω–≥, –Ω–∏–∫–∞–∫–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏!"""

    async def handle_update(self, update: Update):
        user_id = str(update.effective_user.id)
        message = update.message

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞
        current_mode = await property_service.get_user_mode(user_id)

        if current_mode == BotMode.PROPERTY:
            # –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å Property –º–æ–¥—É–ª—é
            await property_handler.handle_property_message(update, user_id, message.text)
        else:
            # –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å Calendar –º–æ–¥—É–ª—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
            await self._handle_calendar_message(update, user_id, message.text)
```

**–ü—Ä–∞–≤–∏–ª–∞:**
- ‚ùå –ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å –ª–æ–≥–∏–∫—É –≤ `telegram_handler.py`
- ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ –∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –í—Å—è –ª–æ–≥–∏–∫–∞ –≤ –º–æ–¥—É–ª—è—Ö

### 4. API —Ä–æ—É—Ç–µ—Ä—ã - –ù–ï –¢–†–û–ì–ê–¢–¨ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ

**Calendar API:** `app/routers/events.py`
```python
# ‚úÖ –≠–¢–ò –≠–ù–î–ü–û–ò–ù–¢–´ –ù–ï –¢–†–û–ì–ê–¢–¨!
GET    /api/events/{user_id}
POST   /api/events/{user_id}
PUT    /api/events/{user_id}/{event_id}
DELETE /api/events/{user_id}/{event_id}
```

**Property API:** `app/routers/property.py`
```python
# ‚ûï –ù–û–í–´–ï –≠–ù–î–ü–û–ò–ù–¢–´
GET    /api/property/clients
POST   /api/property/listings
GET    /api/property/selections
```

### 5. Docker –∏–∑–æ–ª—è—Ü–∏—è

**docker-compose.yml:**
```yaml
services:
  # ‚úÖ Calendar infrastructure (–ù–ï –¢–†–û–ì–ê–¢–¨)
  radicale:
    image: tomsquest/docker-radicale:latest
    volumes:
      - radicale_data:/data
    restart: unless-stopped

  # Telegram Bot (–æ–±—â–∏–π)
  telegram-bot:
    depends_on:
      - radicale
    environment:
      - RADICALE_URL=http://radicale:5232
    restart: unless-stopped

volumes:
  radicale_data:
    # ‚ö†Ô∏è –í–ê–ñ–ù–û: –ù–ï —É–¥–∞–ª—è—Ç—å —ç—Ç–æ—Ç volume!
```

### 6. Health Checks –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

**–§–∞–π–ª:** `app/health.py`

```python
from fastapi import APIRouter

router = APIRouter(prefix="/health", tags=["health"])

@router.get("/calendar")
async def calendar_health():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è Calendar –º–æ–¥—É–ª—è."""
    from app.services.calendar.calendar_radicale import calendar_service

    radicale_ok = calendar_service.is_connected()

    return {
        "status": "ok" if radicale_ok else "error",
        "radicale": "connected" if radicale_ok else "disconnected"
    }

@router.get("/property")
async def property_health():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è Property –º–æ–¥—É–ª—è."""
    from app.services.property.property_service import property_service

    try:
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
        await property_service.get_client("test")
        return {"status": "ok", "database": "connected"}
    except:
        return {"status": "error", "database": "error"}
```

### 7. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

**–§–∞–π–ª:** `tests/test_calendar_stability.py`

```python
import pytest
from app.services.calendar.calendar_radicale import calendar_service

@pytest.mark.asyncio
async def test_calendar_connection():
    """–¢–µ—Å—Ç: –∫–∞–ª–µ–Ω–¥–∞—Ä—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω."""
    assert calendar_service.is_connected()

@pytest.mark.asyncio
async def test_create_event():
    """–¢–µ—Å—Ç: —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è."""
    from app.schemas.events import EventDTO, IntentType
    from datetime import datetime

    event = EventDTO(
        intent=IntentType.CREATE,
        title="Test Event",
        start_time=datetime.now(),
        confidence=1.0,
        raw_text=""
    )

    uid = await calendar_service.create_event("test_user", event)
    assert uid is not None

@pytest.mark.asyncio
async def test_list_events():
    """–¢–µ—Å—Ç: –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π."""
    from datetime import datetime, timedelta

    events = await calendar_service.list_events(
        "test_user",
        datetime.now(),
        datetime.now() + timedelta(days=1)
    )
    assert isinstance(events, list)
```

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
pytest tests/test_calendar_stability.py -v

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker exec telegram-bot pytest tests/test_calendar_stability.py -v
```

### 8. Deployment Guard (–∑–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–º–∞–Ω–∏—è)

**–§–∞–π–ª:** `deploy-safe.sh`

```bash
#!/bin/bash
set -e

echo "üõ°Ô∏è Safe Deployment —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏..."

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ Calendar API —Ä–∞–±–æ—Ç–∞–µ—Ç
echo "1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Calendar API..."
curl -f http://localhost:8000/health/calendar || {
    echo "‚ùå Calendar API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! –û—Ç–º–µ–Ω–∞ –¥–µ–ø–ª–æ—è."
    exit 1
}

# 2. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
echo "2. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤..."
pytest tests/test_calendar_stability.py || {
    echo "‚ùå –¢–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—à–ª–∏! –û—Ç–º–µ–Ω–∞ –¥–µ–ø–ª–æ—è."
    exit 1
}

# 3. –î–µ–ø–ª–æ–π —Ç–æ–ª—å–∫–æ Property —Ñ–∞–π–ª–æ–≤
echo "3. –î–µ–ø–ª–æ–π Property –º–æ–¥—É–ª—è..."
FILES_TO_DEPLOY=(
    "app/models/property.py"
    "app/schemas/property.py"
    "app/services/property/*.py"
    "app/routers/property.py"
)

for file in "${FILES_TO_DEPLOY[@]}"; do
    scp "$file" "root@server:/path/$file"
done

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
echo "4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω—É–∂–µ–Ω –ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫..."
# –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è main.py –∏–ª–∏ telegram_handler.py

echo "‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à—ë–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ!"
```

### 9. Monitoring –∏ Alerts

**–§–∞–π–ª:** `monitor-calendar.sh`

```bash
#!/bin/bash

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
while true; do
    STATUS=$(curl -s http://localhost:8000/health/calendar | jq -r '.status')

    if [ "$STATUS" != "ok" ]; then
        echo "‚ö†Ô∏è ALERT: Calendar –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!"
        # –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        # ...
    fi

    sleep 60
done
```

### 10. Rollback Plan

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å:**

```bash
# 1. –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏
cd /root/ai-calendar-assistant
git log --oneline -5
git checkout <last-working-commit>
docker restart telegram-bot

# 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±—ç–∫–∞–ø–∞
cd /root/backups/radicale-data
ls -lth | head -5
tar -xzf radicale-YYYYMMDD_HHMMSS.tar.gz
docker cp data radicale-calendar:/
docker restart radicale-calendar

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
curl http://localhost:8000/health/calendar
```

### 11. Checklist –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º

```
‚òê –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
‚òê Calendar API –ù–ï –∏–∑–º–µ–Ω—ë–Ω
‚òê Health checks –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
‚òê Docker volumes —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
‚òê –ë—ç–∫–∞–ø –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω
‚òê Rollback plan –≥–æ—Ç–æ–≤
‚òê –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ (–Ω–µ –≤ calendar/)
```

### 12. Monitoring Dashboard

**–§–∞–π–ª:** `status.html` (–¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `/status`)

```html
<!DOCTYPE html>
<html>
<head>
    <title>System Status</title>
    <meta http-equiv="refresh" content="30">
</head>
<body>
    <h1>Calendar Bot Status</h1>

    <div id="calendar-status">
        <h2>üìÖ Calendar Module</h2>
        <div class="status"></div>
    </div>

    <div id="property-status">
        <h2>üè† Property Module</h2>
        <div class="status"></div>
    </div>

    <script>
        async function checkStatus() {
            // Check Calendar
            const calResp = await fetch('/health/calendar');
            const calData = await calResp.json();
            document.querySelector('#calendar-status .status').innerHTML =
                calData.status === 'ok' ? '‚úÖ Working' : '‚ùå Error';

            // Check Property
            const propResp = await fetch('/health/property');
            const propData = await propResp.json();
            document.querySelector('#property-status .status').innerHTML =
                propData.status === 'ok' ? '‚úÖ Working' : '‚ùå Error';
        }

        checkStatus();
        setInterval(checkStatus, 30000);
    </script>
</body>
</html>
```

---

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. ‚ùå –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è
2. ‚ùå –§–∞–π–ª—ã –ø–µ—Ä–µ–º–µ—à–∞–Ω—ã (calendar + property –≤ –æ–¥–Ω–æ–π –ø–∞–ø–∫–µ)
3. ‚ùå –ù–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
4. ‚ùå –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –∏ health checks

### –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–†–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤**
   ```bash
   mkdir -p app/services/calendar
   mkdir -p app/services/property

   # –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å Calendar —Ñ–∞–π–ª—ã
   mv app/services/calendar_radicale.py app/services/calendar/
   mv app/services/llm_agent_yandex.py app/services/calendar/
   mv app/services/event_reminders.py app/services/calendar/

   # –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å Property —Ñ–∞–π–ª—ã
   mv app/services/property_*.py app/services/property/
   mv app/services/llm_agent_property.py app/services/property/
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å Health Checks**
   - –°–æ–∑–¥–∞—Ç—å `/health/calendar`
   - –°–æ–∑–¥–∞—Ç—å `/health/property`
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É

3. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã**
   - `test_calendar_stability.py`
   - –ó–∞–ø—É—Å–∫–∞—Ç—å –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º

4. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–∞–π–ª

5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ–ø–ª–æ–π**
   - `deploy-safe.sh` —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
   - Rollback plan

---

## –†–µ–∑—é–º–µ

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏:

1. **–ò–∑–æ–ª—è—Ü–∏—è –º–æ–¥—É–ª–µ–π** - Calendar –∏ Property –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è
2. **–ù–µ —Ç—Ä–æ–≥–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–µ–µ** - Calendar API –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è
3. **Health checks** - –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã** - –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º
5. **Rollback plan** - –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å
6. **–ë—ç–∫–∞–ø—ã** - –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:

‚úÖ **DO:**
- –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–µ
- –î–æ–±–∞–≤–ª—è—Ç—å health checks
- –ü–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `deploy-safe.sh`

‚ùå **DON'T:**
- –ù–µ –∏–∑–º–µ–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ API
- –ù–µ —Ç—Ä–æ–≥–∞—Ç—å `calendar_radicale.py`
- –ù–µ –∏–∑–º–µ–Ω—è—Ç—å `events.py` router
- –ù–µ —É–¥–∞–ª—è—Ç—å Docker volumes

---

–¢–µ–ø–µ—Ä—å Calendar Bot –±—É–¥–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–º –∏ –Ω–µ –±—É–¥–µ—Ç –ª–æ–º–∞—Ç—å—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π! üõ°Ô∏è
