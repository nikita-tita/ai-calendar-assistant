# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–ò–ú–ï–ù–ï–ù–û

**–î–∞—Ç–∞:** 2025-01-28  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üîç –ü–†–û–ë–õ–ï–ú–ê

–ü–æ—Å–ª–µ –≠–¢–ê–ü 1 (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª–æ—Å—å:
- `secret_key` —Å—Ç–∞–ª –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –ø–æ–ª–µ–º
- –ë–µ–∑ `.env` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–ª–æ —Å `ValidationError`

---

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### 1. –ò–∑–º–µ–Ω–µ–Ω app/config.py

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è `secret_key` –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `secrets.token_urlsafe(32)`
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö –¥–ª—è production

**–ö–æ–¥:**
```python
import secrets
import logging

# ... –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞ ...

# Auto-generate secret_key if not set (with warning)
if settings.secret_key is None:
    settings.secret_key = secrets.token_urlsafe(32)
    logger.warning(
        "secret_key_not_set",
        message="SECRET_KEY not set in .env - using auto-generated secret. "
                "This is OK for development, but set SECRET_KEY in .env for production!"
    )
```

### 2. –°–æ–∑–¥–∞–Ω env.example

**–î–æ–±–∞–≤–ª–µ–Ω —Ñ–∞–π–ª:** `env.example`

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–ª–æ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–µ–∑ `.env`
- ‚ùå –ù–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º
- ‚ùå –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–∞–∂–µ –±–µ–∑ `.env`
- ‚úÖ –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞
- ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö –¥–ª—è production
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `env.example`
- ‚úÖ –ü–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —á—Ç–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

---

## üìã –ß–¢–û –ú–û–ñ–ù–û –î–ï–õ–ê–¢–¨ –î–ê–õ–¨–®–ï

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–±–µ–∑ .env):
```bash
python run_polling.py
# –ò–ª–∏
python run_hybrid.py
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º `secret_key`

### –î–ª—è production:
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `env.example` –≤ `.env`
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
   - `SECRET_KEY` (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å: `python -c "import secrets; print(secrets.token_urlsafe(32))"`)
   - `TELEGRAM_BOT_TOKEN`
   - `YANDEX_GPT_API_KEY`
   - `YANDEX_GPT_FOLDER_ID`
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
- –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è `secret_key` –±–µ–∑–æ–ø–∞—Å–Ω–∞
- –°–µ–∫—Ä–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Production:
- ‚ö†Ô∏è **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –∑–∞–¥–∞—Ç—å `SECRET_KEY` –≤ `.env`
- –°–µ–∫—Ä–µ—Ç –Ω–µ –¥–æ–ª–∂–µ–Ω –º–µ–Ω—è—Ç—å—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
- –ò–Ω–∞—á–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ—Ç–µ—Ä—è—é—Ç —Å–µ—Å—Å–∏–∏

---

## üìä –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É  
**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞  
**–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞  

---

## üß™ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```bash
   python run_polling.py
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ `secret_key`
   - –ë–æ—Ç –¥–æ–ª–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
   - /start –∫–æ–º–∞–Ω–¥–∞
   - –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
   - –ü–æ–∏—Å–∫ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

---

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!** ‚úÖ
