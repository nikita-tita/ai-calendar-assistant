# ‚úÖ Property Bot UX –£–ª—É—á—à–µ–Ω - –ì–æ—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏

**–î–∞—Ç–∞**: 2025-10-30 14:41 MSK
**–í–µ—Ä—Å–∏—è**: 3.0 - –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

---

## üéØ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ü—Ä–æ–±–ª–µ–º—ã (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è):

1. ‚ùå **–ù–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫** - "–Ω–µ–ø–æ–Ω—è—Ç–Ω–æ –∫–∞–∫–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞"
2. ‚ùå **–ù–µ—Ç —Ñ–æ—Ç–æ –ñ–ö** - "–Ω–µ –≤–∏–¥–Ω–æ –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –∫–æ–º–ø–ª–µ–∫—Å"
3. ‚ùå **–õ–∞–π–∫/–¥–∏–∑–ª–∞–π–∫ –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã** - "—Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç, –Ω–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è"

### –†–µ—à–µ–Ω–∏—è:

1. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–æ—Ç–æ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏** - –∫–∞–∂–¥–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–µ–ø–µ—Ä—å —Å –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
2. ‚úÖ **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ —Å –∏—Å—Ç–æ—Ä–∏–µ–π** - –ª–∞–π–∫–Ω—É—Ç—ã–µ –æ–±—ä–µ–∫—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
3. ‚úÖ **–§–ª–æ—É –¥–ª—è –∞–≥–µ–Ω—Ç–∞** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–∏—Ç—å PDF-–ø–æ–¥–±–æ—Ä–∫—É –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
4. ‚úÖ **–°–±–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏** - –ø—Ä–∏ –¥–∏–∑–ª–∞–π–∫–µ —Å–ø—Ä–∞—à–∏–≤–∞–µ–º –ø—Ä–∏—á–∏–Ω—É

---

## üì± –ù–æ–≤—ã–π UX Flow

### 1. –ü–æ–∏—Å–∫ –∫–≤–∞—Ä—Ç–∏—Ä—ã

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–î–≤—É—à–∫–∞ –¥–æ 18 –º–ª–Ω –Ω–∞ —Å–µ–≤–µ—Ä–µ"

–ë–æ—Ç:
üìã –Ø –ø–æ–Ω—è–ª –≤–∞—à –∑–∞–ø—Ä–æ—Å:
üí∞ –ë—é–¥–∂–µ—Ç: –¥–æ 18 000 000 ‚ÇΩ
üè† –ö–æ–º–Ω–∞—Ç: 2
üìç –†–∞–π–æ–Ω—ã: –í—ã–±–æ—Ä–≥—Å–∫–∏–π

[‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å] [‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å]
```

### 2. –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å —Ñ–æ—Ç–æ

```
‚ú® –ù–∞–π–¥–µ–Ω–æ 4 –ª—É—á—à–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

[–ê–ª—å–±–æ–º –∏–∑ 3 —Ñ–æ—Ç–æ:]
üì∏ –§–æ—Ç–æ 1: –ñ–ö –°–≤–µ—Ç–ª—ã–π –º–∏—Ä (—Ñ–∞—Å–∞–¥)
   üìç –í–∞—Ä–∏–∞–Ω—Ç 1

   üè¢ –ñ–ö –°–≤–µ—Ç–ª—ã–π –º–∏—Ä
   –î–≤—É—à–∫–∞ 18–º–ª–Ω –í—ã–±–æ—Ä–≥—Å–∫–∏–π

   üí∞ 18.0 –º–ª–Ω ‚ÇΩ
   üè† 2-–∫–æ–º–Ω. ‚Ä¢ 70.0 –º¬≤
   üî¢ –≠—Ç–∞–∂: 8 –∏–∑ 25
   üìÖ –°—Ä–æ–∫ —Å–¥–∞—á–∏: IV –∫–≤–∞—Ä—Ç–∞–ª 2025 –≥.

   üìç –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:
      —É–ª. –†—É—Å—Ç–∞–≤–µ–ª–∏, 12
      –í—ã–±–æ—Ä–≥—Å–∫–∏–π, –º. –ü—Ä–æ—Å–ø–µ–∫—Ç –ü—Ä–æ—Å–≤–µ—â–µ–Ω–∏—è

   ‚≠êÔ∏è Dream Score: 55.2/100
   –ü–æ–¥—Ö–æ–¥–∏—Ç –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º: —É–¥–æ–±–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —É –º–µ—Ç—Ä–æ

üì∏ –§–æ—Ç–æ 2: –ñ–ö –°–≤–µ—Ç–ª—ã–π –º–∏—Ä (–¥–≤–æ—Ä)
üì∏ –§–æ—Ç–æ 3: üìê –ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ 2-–∫–æ–º–Ω 70 –º¬≤

–ß—Ç–æ –¥—É–º–∞–µ—Ç–µ –æ–± —ç—Ç–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ?
[‚ù§Ô∏è –ù—Ä–∞–≤–∏—Ç—Å—è] [üëé –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç]
```

### 3. –ü—Ä–∏ –ª–∞–π–∫–µ - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª: ‚ù§Ô∏è –ù—Ä–∞–≤–∏—Ç—Å—è

–ë–æ—Ç:
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ!

–£ –≤–∞—Å 1 –æ–±—ä–µ–∫—Ç(–æ–≤) –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º.
–ü–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å PDF-–ø–æ–¥–±–æ—Ä–∫—É –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç—É.

[üìã –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ] [‚Ü©Ô∏è –£–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ]
```

### 4. –ü—Ä–∏ –¥–∏–∑–ª–∞–π–∫–µ - —Å–±–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª: üëé –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç

–ë–æ—Ç:
üëé –ü–æ—á–µ–º—É –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç?

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —É–ª—É—á—à–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

[üí∞ –î–æ—Ä–æ–≥–æ]
[üìç –ù–µ —Ç–∞ –ª–æ–∫–∞—Ü–∏—è]
[üìê –ú–∞–ª–µ–Ω—å–∫–∞—è –ø–ª–æ—â–∞–¥—å]
[üè¢ –ù–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –ñ–ö]
[üìÖ –ü–æ–∑–¥–Ω—è—è —Å–¥–∞—á–∞]
[ü§∑ –î—Ä—É–≥–æ–µ]
```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª: üí∞ –î–æ—Ä–æ–≥–æ

```
–ë–æ—Ç:
‚úÖ –£—á—Ç–µ–Ω–æ: –¶–µ–Ω–∞ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∞—è

–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã, —è –±—É–¥—É —É—á–∏—Ç—ã–≤–∞—Ç—å –≤–∞—à–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ–∏—Å–∫–∞—Ö.
```

### 5. –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª: üìã –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

–ë–æ—Ç:
üìã –í–∞—à–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã (2):

1. –î–≤—É—à–∫–∞ 18–º–ª–Ω –í—ã–±–æ—Ä–≥—Å–∫–∏–π
2. –î–≤—É—à–∫–∞ 16–º–ª–Ω –ü—Ä–∏–º–æ—Ä—Å–∫–∏–π

üí° –ß—Ç–æ –¥–∞–ª—å—à–µ?

[üìÑ –ü–æ–ª—É—á–∏—Ç—å PDF-–ø–æ–¥–±–æ—Ä–∫—É]
[üîó –ü–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞]
[üîç –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∏—Å–∫]
```

### 6. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥–±–æ—Ä–∫–∏

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª: üìÑ –ü–æ–ª—É—á–∏—Ç—å PDF-–ø–æ–¥–±–æ—Ä–∫—É

–ë–æ—Ç:
‚è≥ –ì–µ–Ω–µ—Ä–∏—Ä—É—é PDF-–ø–æ–¥–±–æ—Ä–∫—É...

–û–±—ä–µ–∫—Ç–æ–≤ –≤ –ø–æ–¥–±–æ—Ä–∫–µ: 2

–≠—Ç–æ –∑–∞–π–º–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥.

---

üìÑ PDF-–ø–æ–¥–±–æ—Ä–∫–∞ –≥–æ—Ç–æ–≤–∞!

–§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF –ø–æ–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

–í —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
‚Ä¢ –ö—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã–π PDF
‚Ä¢ –í—Å–µ —Ñ–æ—Ç–æ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏
‚Ä¢ –û–ø–∏—Å–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
‚Ä¢ –ö–æ–Ω—Ç–∞–∫—Ç—ã –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–æ–≤
‚Ä¢ –ì–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç—É

–ò–∑–±—Ä–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã: 2 —à—Ç.
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–æ—Ç–æ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏ –≤ –ë–î

**–§–∞–π–ª**: [add_photos_and_plans.sql](add_photos_and_plans.sql)

```sql
UPDATE property_listings SET
    photos = '[
        {"url": "...", "description": "–§–∞—Å–∞–¥ –∫–æ–º–ø–ª–µ–∫—Å–∞"},
        {"url": "...", "description": "–î–≤–æ—Ä —Å –¥–µ—Ç—Å–∫–æ–π –ø–ª–æ—â–∞–¥–∫–æ–π"}
    ]'::jsonb,
    floor_plan_images = '[
        {"url": "...", "description": "–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ 2-–∫–æ–º–Ω 70 –º¬≤"}
    ]'::jsonb
WHERE id = '...';
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ 5 –¥–≤—É—à–µ–∫ —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç:
- 2 —Ñ–æ—Ç–æ –ñ–ö
- 1 –ø–ª–∞–Ω–∏—Ä–æ–≤–∫—É –∫–≤–∞—Ä—Ç–∏—Ä—ã

### 2. –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫

**–§–∞–π–ª**: [app/services/property/property_handler.py:677-796](app/services/property/property_handler.py#L677-L796)

```python
async def _send_property_card(self, update: Update, user_id: str, listing: dict, index: int) -> None:
    """Send detailed property card to user."""
    from telegram import InputMediaPhoto

    # ... build message ...

    # Collect photos and floor plans
    photos = listing.get("photos") or []
    floor_plans = listing.get("floor_plan_images") or []

    media_group = []

    # Add complex photos (max 2)
    for i, photo in enumerate(photos[:2]):
        caption = message if i == 0 else ""
        media_group.append(InputMediaPhoto(
            media=photo["url"],
            caption=caption,
            parse_mode="HTML"
        ))

    # Add floor plan (1)
    if floor_plans:
        plan = floor_plans[0]
        plan_caption = f"üìê {plan.get('description', '–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞')}"
        media_group.append(InputMediaPhoto(
            media=plan["url"],
            caption=plan_caption
        ))

    # Send photos as media group
    await update.callback_query.message.reply_media_group(media=media_group)

    # Send buttons separately
    keyboard = InlineKeyboardMarkup([
        [
            InlineKeyboardButton("‚ù§Ô∏è –ù—Ä–∞–≤–∏—Ç—Å—è", callback_data=f"property_like:{listing['id']}"),
            InlineKeyboardButton("üëé –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç", callback_data=f"property_dislike:{listing['id']}")
        ]
    ])

    await update.callback_query.message.reply_text(
        "–ß—Ç–æ –¥—É–º–∞–µ—Ç–µ –æ–± —ç—Ç–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ?",
        reply_markup=keyboard
    )
```

### 3. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

**–§–∞–π–ª**: [app/services/property/property_handler.py:846-877](app/services/property/property_handler.py#L846-L877)

```python
async def _handle_like(self, update: Update, user_id: str, listing_id: str) -> None:
    """Handle like feedback - save to favorites."""
    # Initialize favorites list
    if user_id not in self.conversation_state:
        self.conversation_state[user_id] = {}

    if "favorites" not in self.conversation_state[user_id]:
        self.conversation_state[user_id]["favorites"] = []

    # Add to favorites
    if listing_id not in self.conversation_state[user_id]["favorites"]:
        self.conversation_state[user_id]["favorites"].append(listing_id)

    favorites_count = len(self.conversation_state[user_id]["favorites"])

    # Show confirmation with actions
    keyboard = InlineKeyboardMarkup([
        [
            InlineKeyboardButton("üìã –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ", callback_data=f"property_show_favorites:{user_id}"),
            InlineKeyboardButton("‚Ü©Ô∏è –£–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ", callback_data=f"property_unlike:{listing_id}")
        ]
    ])

    await update.callback_query.edit_message_text(
        f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ!\n\n"
        f"–£ –≤–∞—Å {favorites_count} –æ–±—ä–µ–∫—Ç(–æ–≤) –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º.\n"
        f"–ü–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å PDF-–ø–æ–¥–±–æ—Ä–∫—É –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç—É.",
        parse_mode="HTML",
        reply_markup=keyboard
    )
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω —Å–±–æ—Ä –ø—Ä–∏—á–∏–Ω –¥–∏–∑–ª–∞–π–∫–∞

**–§–∞–π–ª**: [app/services/property/property_handler.py:879-905](app/services/property/property_handler.py#L879-L905)

```python
async def _handle_dislike(self, update: Update, user_id: str, listing_id: str) -> None:
    """Handle dislike feedback - ask for reason."""
    keyboard = InlineKeyboardMarkup([
        [InlineKeyboardButton("üí∞ –î–æ—Ä–æ–≥–æ", callback_data=f"dislike_reason:{listing_id}:price_high")],
        [InlineKeyboardButton("üìç –ù–µ —Ç–∞ –ª–æ–∫–∞—Ü–∏—è", callback_data=f"dislike_reason:{listing_id}:location")],
        [InlineKeyboardButton("üìê –ú–∞–ª–µ–Ω—å–∫–∞—è –ø–ª–æ—â–∞–¥—å", callback_data=f"dislike_reason:{listing_id}:area_small")],
        [InlineKeyboardButton("üè¢ –ù–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –ñ–ö", callback_data=f"dislike_reason:{listing_id}:complex")],
        [InlineKeyboardButton("üìÖ –ü–æ–∑–¥–Ω—è—è —Å–¥–∞—á–∞", callback_data=f"dislike_reason:{listing_id}:completion_late")],
        [InlineKeyboardButton("ü§∑ –î—Ä—É–≥–æ–µ", callback_data=f"dislike_reason:{listing_id}:other")]
    ])

    await update.callback_query.edit_message_text(
        "üëé –ü–æ—á–µ–º—É –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç?\n\n"
        "–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —É–ª—É—á—à–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:",
        parse_mode="HTML",
        reply_markup=keyboard
    )
```

### 5. –î–æ–±–∞–≤–ª–µ–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω—ã–º

**–§–∞–π–ª—ã**:
- `_handle_unlike()` - [property_handler.py:923-934](app/services/property/property_handler.py#L923-L934)
- `_save_dislike_reason()` - [property_handler.py:936-959](app/services/property/property_handler.py#L936-L959)
- `_show_favorites()` - [property_handler.py:961-1000](app/services/property/property_handler.py#L961-L1000)
- `_generate_selection()` - [property_handler.py:1002-1040](app/services/property/property_handler.py#L1002-L1040)

### 6. –û–±–Ω–æ–≤–ª–µ–Ω —Ä–æ—É—Ç–∏–Ω–≥ callback'–æ–≤

**–§–∞–π–ª**: [app/services/property/property_handler.py:504-540](app/services/property/property_handler.py#L504-L540)

–î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
- `property_unlike:*` - —É–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- `property_show_favorites:*` - –ø–æ–∫–∞–∑–∞—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- `dislike_reason:*:*` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É –¥–∏–∑–ª–∞–π–∫–∞
- `property_get_selection:*` - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å PDF-–ø–æ–¥–±–æ—Ä–∫—É

---

## üìä –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –ó–∞–º–µ—Ç–∫–∏ |
|---------|--------|---------|
| **–§–æ—Ç–æ –ñ–ö** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 2 —Ñ–æ—Ç–æ –Ω–∞ –æ–±—ä–µ–∫—Ç |
| **–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∏** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 1 –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç |
| **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ |
| **–î–∏–∑–ª–∞–π–∫ –ø—Ä–∏—á–∏–Ω—ã** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 6 —Ç–∏–ø–æ–≤ –ø—Ä–∏—á–∏–Ω |
| **–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –°–ø–∏—Å–æ–∫ + –¥–µ–π—Å—Ç–≤–∏—è |
| **PDF-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è** | ‚è≥ –ó–∞–≥–ª—É—à–∫–∞ | TODO: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å |
| **–°—Å—ã–ª–∫–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞** | ‚è≥ TODO | –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è |

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É):

1. **PDF-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - —Ä–µ–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —Å:
   - –õ–æ–≥–æ—Ç–∏–ø–æ–º –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞
   - –í—Å–µ–º–∏ —Ñ–æ—Ç–æ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞–º–∏
   - –û–ø–∏—Å–∞–Ω–∏—è–º–∏ –æ–±—ä–µ–∫—Ç–æ–≤
   - –ö–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–æ–≤
   - QR-–∫–æ–¥–∞–º–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã

2. **–ü—É–±–ª–∏—á–Ω–∞—è —Å—Å—ã–ª–∫–∞** - —Å–æ–∑–¥–∞–Ω–∏–µ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ø–æ–¥–±–æ—Ä–∫–æ–π:
   - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π URL –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–¥–±–æ—Ä–∫–∏
   - –ö—Ä–∞—Å–∏–≤—ã–π –ª–µ–Ω–¥–∏–Ω–≥ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç—É –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
   - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

3. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î:
   - –¢–∞–±–ª–∏—Ü–∞ `selections` –¥–ª—è –ø–æ–¥–±–æ—Ä–æ–∫
   - –¢–∞–±–ª–∏—Ü–∞ `selection_items` –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø–æ–¥–±–æ—Ä–∫–µ
   - –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–æ–¥–±–æ—Ä–æ–∫ –∞–≥–µ–Ω—Ç–∞

4. **Email-—Ä–∞—Å—Å—ã–ª–∫–∞** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–¥–±–æ—Ä–∫–∏ –Ω–∞ email:
   - PDF-—Ñ–∞–π–ª–æ–º
   - –ò–ª–∏ HTML-–ø–∏—Å—å–º–æ–º —Å –ø—Ä–µ–≤—å—é
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π follow-up

---

## üéØ –¶–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –∞–≥–µ–Ω—Ç–∞

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π:
‚ùå –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–ª –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
‚ùå –ù–µ–ø–æ–Ω—è—Ç–Ω–æ –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –∫–≤–∞—Ä—Ç–∏—Ä–∞
‚ùå –ù–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–æ–º
‚ùå –ù–µ–ª—å–∑—è —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–±–æ—Ä–∫—É

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:
‚úÖ **–í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è** - —Ñ–æ—Ç–æ –ñ–ö –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏
‚úÖ **–£–¥–æ–±–Ω—ã–π –æ—Ç–±–æ—Ä** - –ª–∞–π–∫/–¥–∏–∑–ª–∞–π–∫ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
‚úÖ **–°–±–æ—Ä –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π** - –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –¥–∏–∑–ª–∞–π–∫–∞
‚úÖ **–ì–æ—Ç–æ–≤–∞—è –ø–æ–¥–±–æ—Ä–∫–∞** - –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç—É
‚úÖ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–∏–¥** - –∞–≥–µ–Ω—Ç –≤—ã–≥–ª—è–¥–∏—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

## üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–º

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ê–≥–µ–Ω—Ç –∏—â–µ—Ç –∫–≤–∞—Ä—Ç–∏—Ä—É –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞

1. **–ü–æ–ª—É—á–∏–ª –∑–∞–ø—Ä–æ—Å –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞**: "–•–æ—á—É –¥–≤—É—à–∫—É –≤ –í—ã–±–æ—Ä–≥—Å–∫–æ–º —Ä–∞–π–æ–Ω–µ, –±—é–¥–∂–µ—Ç –¥–æ 18 –º–ª–Ω"

2. **–û—Ç–∫—Ä—ã–ª –±–æ—Ç–∞** @aipropertyfinder_bot

3. **–í–≤–µ–ª –∫—Ä–∏—Ç–µ—Ä–∏–∏**: "–î–≤—É—à–∫–∞ –¥–æ 18 –º–ª–Ω –Ω–∞ —Å–µ–≤–µ—Ä–µ"

4. **–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** —Å —Ñ–æ—Ç–æ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞–º–∏:
   - –ñ–ö –°–≤–µ—Ç–ª—ã–π –º–∏—Ä - 18 –º–ª–Ω ‚ù§Ô∏è –ù—Ä–∞–≤–∏—Ç—Å—è
   - –ñ–ö –®—É–≤–∞–ª–æ–≤—Å–∫–∏–π - 16 –º–ª–Ω ‚ù§Ô∏è –ù—Ä–∞–≤–∏—Ç—Å—è
   - –ñ–ö –¶–≤–µ—Ç–Ω–æ–π –≥–æ—Ä–æ–¥ - 17.5 –º–ª–Ω üëé –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç (–¥–æ—Ä–æ–≥–æ)
   - –ñ–ö –õ–∞—Ö—Ç–∞ –ü–∞—Ä–∫ - 19 –º–ª–Ω üëé –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç (–¥–æ—Ä–æ–≥–æ)

5. **–û—Ç–∫—Ä—ã–ª –∏–∑–±—Ä–∞–Ω–Ω–æ–µ**: 2 –æ–±—ä–µ–∫—Ç–∞

6. **–ü–æ–ª—É—á–∏–ª PDF-–ø–æ–¥–±–æ—Ä–∫—É** (–ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞)

7. **–û—Ç–ø—Ä–∞–≤–∏–ª –∫–ª–∏–µ–Ω—Ç—É** –≥–æ—Ç–æ–≤—É—é –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é —Å –ª—É—á—à–∏–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏

---

## ‚úÖ –î–µ–ø–ª–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ë–î
psql < add_photos_and_plans.sql  # 5 –æ–±—ä–µ–∫—Ç–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–æ

# –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–¥
scp app/services/property/property_handler.py root@server:/root/ai-calendar-assistant/
docker cp property_handler.py property-bot:/app/app/services/property/
docker restart property-bot

# –°—Ç–∞—Ç—É—Å
docker ps | grep property-bot
‚úÖ Up 10 seconds (health: starting)

docker logs property-bot | tail -3
‚úÖ Application started
```

**–î–µ–ø–ª–æ–π**: 2025-10-30 14:41:24 MSK
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

---

## üéâ –ò—Ç–æ–≥

–ë–æ—Ç —Ç–µ–ø–µ—Ä—å **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≥–µ–Ω—Ç–∞ –ø–æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏**:

‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
‚úÖ –£–¥–æ–±–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∏–∑–±—Ä–∞–Ω–Ω—ã–º
‚úÖ –°–±–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è
‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥–±–æ—Ä–æ–∫

**–ì–æ—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: https://t.me/aipropertyfinder_bot
