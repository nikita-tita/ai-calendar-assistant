# Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ Property Bot

**Ğ”Ğ°Ñ‚Ğ°:** 2025-10-30

---

## ğŸ¨ Ğ¢Ğ•ĞšĞ£Ğ©Ğ•Ğ• Ğ¡ĞĞ¡Ğ¢ĞĞ¯ĞĞ˜Ğ• Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        TELEGRAM API                            â”‚
â”‚                  (Ğ¾Ğ´Ğ¸Ğ½ Ñ‚Ğ¾ĞºĞµĞ½ Ğ´Ğ»Ñ Ğ²ÑĞµÑ…)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    /telegram/webhook                  â”‚
        â”‚    âœ… Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   telegram_handler.py                  â”‚
        â”‚   âš ï¸  ĞĞ• Ğ—ĞĞĞ•Ğ¢ Ğ¿Ñ€Ğ¾ Property Ñ€ĞµĞ¶Ğ¸Ğ¼     â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
             â”‚                               â”‚
             â”‚                               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  CALENDAR BOT   â”‚           â”‚   PROPERTY BOT     â”‚
    â”‚  âœ… ĞĞšĞ¢Ğ˜Ğ’Ğ•Ğ     â”‚           â”‚   âŒ Ğ¡ĞŸĞ˜Ğ¢          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    SQLite       â”‚           â”‚   PostgreSQL       â”‚
    â”‚  âœ… Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢    â”‚           â”‚   âŒ ĞĞ• Ğ—ĞĞŸĞ£Ğ©Ğ•Ğ    â”‚
    â”‚  /var/lib/      â”‚           â”‚   Port: 5433       â”‚
    â”‚  radicale/      â”‚           â”‚   Volume: ÑĞ¿Ğ¸Ñ‚     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Ğ¡Ğ¢ĞĞ¢Ğ£Ğ¡ ĞšĞĞœĞŸĞĞĞ•ĞĞ¢ĞĞ’

### Telegram Bot (Ğ¾Ğ±Ñ‰Ğ¸Ğ¹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component: Telegram Bot Token           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âœ… Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢                     â”‚
â”‚ Location: .env â†’ TELEGRAM_BOT_TOKEN     â”‚
â”‚ Used by: Calendar + Property (Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component: Webhook Endpoint             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âœ… Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢                     â”‚
â”‚ URL: /telegram/webhook                  â”‚
â”‚ Handles: text, voice, callback_query    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Calendar Bot

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component: Calendar Service             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âœ… Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢                     â”‚
â”‚ Container: telegram-bot (running)       â”‚
â”‚ Port: 8000                              â”‚
â”‚ Database: SQLite via Radicale           â”‚
â”‚ Features:                               â”‚
â”‚   âœ… Create events                      â”‚
â”‚   âœ… Voice messages                     â”‚
â”‚   âœ… Reminders                          â”‚
â”‚   âœ… Daily summary                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component: Radicale (CalDAV)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âœ… Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢                     â”‚
â”‚ Container: radicale (running)           â”‚
â”‚ Port: 5232                              â”‚
â”‚ Storage: /var/lib/radicale/             â”‚
â”‚ Format: .ics files                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Property Bot - BACKEND

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component: Property Service             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âŒ ĞšĞĞ” Ğ“ĞĞ¢ĞĞ’, ĞĞ ĞĞ• Ğ—ĞĞŸĞ£Ğ©Ğ•Ğ    â”‚
â”‚ Files: app/services/property/*.py       â”‚
â”‚ Lines of code: ~8,500                   â”‚
â”‚ Completeness: 100%                      â”‚
â”‚                                         â”‚
â”‚ Modules:                                â”‚
â”‚   âœ… property_service.py (772 ÑÑ‚Ñ€Ğ¾Ğº)   â”‚
â”‚   âœ… feed_loader.py (185 ÑÑ‚Ñ€Ğ¾Ğº)        â”‚
â”‚   âœ… property_handler.py (645 ÑÑ‚Ñ€Ğ¾Ğº)   â”‚
â”‚   âœ… dream_score.py (700+ ÑÑ‚Ñ€Ğ¾Ğº)       â”‚
â”‚   âœ… poi_enrichment.py (500+ ÑÑ‚Ñ€Ğ¾Ğº)    â”‚
â”‚   âœ… route_matrix.py (400+ ÑÑ‚Ñ€Ğ¾Ğº)      â”‚
â”‚   âœ… vision_analysis.py (500+ ÑÑ‚Ñ€Ğ¾Ğº)   â”‚
â”‚   âœ… developer_reputation.py (500+ Ñ)  â”‚
â”‚                                         â”‚
â”‚ Integration status:                     â”‚
â”‚   âŒ main.py - imports commented out   â”‚
â”‚   âŒ telegram_handler - not connected  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component: PostgreSQL Database          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âŒ ĞĞ• Ğ—ĞĞŸĞ£Ğ©Ğ•Ğ                   â”‚
â”‚ Container: property-db (not started)    â”‚
â”‚ Port: 5433 â†’ 5432                       â”‚
â”‚ User: property_user                     â”‚
â”‚ DB: property_bot                        â”‚
â”‚                                         â”‚
â”‚ Tables (planned):                       â”‚
â”‚   â³ property_clients                   â”‚
â”‚   â³ property_listings                  â”‚
â”‚   â³ property_selections                â”‚
â”‚   â³ selection_items                    â”‚
â”‚   â³ selection_feedback                 â”‚
â”‚   â³ user_bot_modes (Ğ’ĞĞ–ĞĞ!)            â”‚
â”‚                                         â”‚
â”‚ Migrations:                             â”‚
â”‚   ğŸ“ migrations/001_add_extended_pr...  â”‚
â”‚   âŒ Not applied yet                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component: Feed Loader                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âŒ ĞĞ• Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢ (no scheduler)   â”‚
â”‚ Code: app/services/property/feed_loader.pyâ”‚
â”‚ Feed URL: âœ… Verified (11,999 items)    â”‚
â”‚                                         â”‚
â”‚ Capabilities:                           â”‚
â”‚   âœ… Download XML feed                  â”‚
â”‚   âœ… Parse Yandex.Realty format         â”‚
â”‚   âœ… Upsert to PostgreSQL               â”‚
â”‚   âŒ Automatic updates (NO scheduler)   â”‚
â”‚                                         â”‚
â”‚ What's missing:                         â”‚
â”‚   âŒ APScheduler not added              â”‚
â”‚   âŒ Cron job not configured            â”‚
â”‚   âŒ Background task not started        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Property Bot - AI SERVICES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service: Yandex GPT (NLU)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âš ï¸  CONFIGURED, NOT USED        â”‚
â”‚ Purpose: Parse natural language queries â”‚
â”‚ Cost: 1â‚½ / 1,000 tokens                 â”‚
â”‚ Monthly: ~4,500-9,000â‚½ (1K users/day)   â”‚
â”‚ Fallback: âœ… Regex parser (free)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service: OpenStreetMap (POI)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âœ… READY                         â”‚
â”‚ Purpose: Schools, parks, grocery nearby â”‚
â”‚ Cost: ğŸ†“ FREE                            â”‚
â”‚ Limits: None (reasonable use)           â”‚
â”‚ Fallback: Not needed (always available) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service: Yandex.Maps (Routes)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âš ï¸  OPTIONAL                    â”‚
â”‚ Purpose: Route time to work/anchor pts  â”‚
â”‚ Cost: 25K free/month, then 1â‚½/request   â”‚
â”‚ Fallback: âœ… Distance calculation (free)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service: Yandex Vision (Photos)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âš ï¸  OPTIONAL                    â”‚
â”‚ Purpose: Analyze property photos        â”‚
â”‚ Cost: 1K free/month, then 1â‚½/image      â”‚
â”‚ Fallback: âœ… Basic metadata (free)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service: Dream Score Algorithm          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âœ… READY                         â”‚
â”‚ Components: 9 factors                   â”‚
â”‚ Output: 0-100 score + explanations      â”‚
â”‚ Cost: ğŸ†“ FREE (built-in)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ĞŸĞĞ¢ĞĞš Ğ”ĞĞĞĞ«Ğ¥ (Ğ¿Ğ¾ÑĞ»Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Message    â”‚
â”‚  "Ğ˜Ñ‰Ñƒ 2Ğº Ğ´Ğ¾ 10Ğ¼" â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram â†’ Webhook            â”‚
â”‚  POST /telegram/webhook        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  telegram_handler.py           â”‚
â”‚  1. Check user_bot_modes       â”‚
â”‚  2. Route to correct bot       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
     â”‚                       â”‚
     â”‚ BotMode.CALENDAR      â”‚ BotMode.PROPERTY
     â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Calendar    â”‚    â”‚ property_handler.py  â”‚
â”‚ handler     â”‚    â”‚ 1. Parse query       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ 2. Extract criteria  â”‚
                   â”‚ 3. Search DB         â”‚
                   â”‚ 4. Rank results      â”‚
                   â”‚ 5. Send to user      â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ PostgreSQL           â”‚
                   â”‚ SELECT * FROM        â”‚
                   â”‚ property_listings    â”‚
                   â”‚ WHERE ...            â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš¦ DEPENDENCY GRAPH

```
telegram_handler.py
    â”œâ”€â†’ property_service.py
    â”‚       â”œâ”€â†’ PostgreSQL (user_bot_modes)
    â”‚       â””â”€â†’ property_handler.py
    â”‚               â”œâ”€â†’ llm_agent_property.py
    â”‚               â”‚       â””â”€â†’ Yandex GPT API
    â”‚               â”‚
    â”‚               â”œâ”€â†’ property_service.py
    â”‚               â”‚       â””â”€â†’ PostgreSQL (listings, clients)
    â”‚               â”‚
    â”‚               â””â”€â†’ property_scoring.py
    â”‚                       â”œâ”€â†’ dream_score.py
    â”‚                       â”œâ”€â†’ poi_enrichment.py (OSM)
    â”‚                       â”œâ”€â†’ route_matrix.py (Yandex.Maps)
    â”‚                       â”œâ”€â†’ vision_analysis.py (Yandex Vision)
    â”‚                       â””â”€â†’ developer_reputation.py
    â”‚
    â””â”€â†’ calendar_handler.py (existing)
            â”œâ”€â†’ calendar_radicale.py
            â””â”€â†’ SQLite (via Radicale)
```

---

## ğŸ“¦ DOCKER CONTAINERS

### Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Container: telegram-bot                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âœ… Running                     â”‚
â”‚ Image: custom (Dockerfile)             â”‚
â”‚ Port: 8000 â†’ 8000                      â”‚
â”‚ Networks: backend                      â”‚
â”‚ Volumes:                               â”‚
â”‚   - ./app:/app/app:ro                  â”‚
â”‚   - calendar_data:/var/lib/calendar    â”‚
â”‚ Environment:                           â”‚
â”‚   - TELEGRAM_BOT_TOKEN                 â”‚
â”‚   - YANDEX_GPT_API_KEY                 â”‚
â”‚   - RADICALE_URL                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Container: radicale                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âœ… Running                     â”‚
â”‚ Image: tomsquest/docker-radicale       â”‚
â”‚ Port: 5232 â†’ 5232                      â”‚
â”‚ Networks: backend                      â”‚
â”‚ Volumes:                               â”‚
â”‚   - radicale_data:/data                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Container: property-db                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âŒ Not started                 â”‚
â”‚ Image: postgres:14-alpine              â”‚
â”‚ Port: 5433 â†’ 5432                      â”‚
â”‚ Networks: property-bot-network         â”‚
â”‚ Volumes:                               â”‚
â”‚   - property-db-data:/var/lib/postgresqlâ”‚
â”‚ Environment:                           â”‚
â”‚   - POSTGRES_DB=property_bot           â”‚
â”‚   - POSTGRES_USER=property_user        â”‚
â”‚   - POSTGRES_PASSWORD=${DB_PASSWORD}   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Container: property-bot (planned)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status: âŒ Not created                 â”‚
â”‚ Purpose: Separate instance (optional)  â”‚
â”‚ Note: Can run in main telegram-bot    â”‚
â”‚ container after integration            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ FILE STRUCTURE

```
ai-calendar-assistant/
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                    âš ï¸  Property imports commented
â”‚   â”œâ”€â”€ config.py                  âœ…  Ready
â”‚   â”‚
â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”œâ”€â”€ telegram.py            âœ…  Works (Calendar only)
â”‚   â”‚   â”œâ”€â”€ property.py            âŒ  Not included in main.py
â”‚   â”‚   â””â”€â”€ events.py              âœ…  Works
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ telegram_handler.py    âš ï¸  Needs property integration
â”‚   â”‚   â”œâ”€â”€ calendar_radicale.py   âœ…  Works
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ property/              âœ…  All code ready (100%)
â”‚   â”‚       â”œâ”€â”€ property_service.py
â”‚   â”‚       â”œâ”€â”€ property_handler.py
â”‚   â”‚       â”œâ”€â”€ feed_loader.py
â”‚   â”‚       â”œâ”€â”€ feed_mapper.py
â”‚   â”‚       â”œâ”€â”€ dream_score.py
â”‚   â”‚       â”œâ”€â”€ poi_enrichment.py
â”‚   â”‚       â”œâ”€â”€ route_matrix.py
â”‚   â”‚       â”œâ”€â”€ vision_analysis.py
â”‚   â”‚       â”œâ”€â”€ developer_reputation.py
â”‚   â”‚       â”œâ”€â”€ llm_agent_property.py
â”‚   â”‚       â”œâ”€â”€ property_scoring.py
â”‚   â”‚       â””â”€â”€ search_result_handler.py
â”‚   â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ property.py            âœ…  Ready (5 models)
â”‚   â”‚
â”‚   â””â”€â”€ schemas/
â”‚       â””â”€â”€ property.py            âœ…  Ready (10+ schemas)
â”‚
â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ 001_add_extended_property_fields.sql  â³ Not applied
â”‚
â”œâ”€â”€ docker-compose.yml             âœ…  Calendar Bot (running)
â”œâ”€â”€ docker-compose.property.yml    âŒ  Property Bot (not started)
â”‚
â”œâ”€â”€ .env                           âš ï¸  Missing property variables
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ PROPERTY_BOT_AUDIT_SUMMARY.md          â­ THIS FILE
    â”œâ”€â”€ PROPERTY_BOT_ACTIVATION_PLAN.md        â­ ACTION PLAN
    â”œâ”€â”€ PROPERTY_VS_CALENDAR_ARCHITECTURE.md   ğŸ“š ARCHITECTURE
    â”œâ”€â”€ PROPERTY_BOT_QUICK_START.md            ğŸ“– OVERVIEW
    â””â”€â”€ 05-property-bot/                       ğŸ“ DETAILED DOCS
```

---

## â±ï¸ Ğ’Ğ Ğ•ĞœĞ¯ ĞĞ ĞĞšĞ¢Ğ˜Ğ’ĞĞ¦Ğ˜Ğ®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Task                        Time       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Setup .env               5 min      â”‚
â”‚ 2. Start PostgreSQL         5 min      â”‚
â”‚ 3. Apply migrations         5 min      â”‚
â”‚ 4. Update main.py           10 min     â”‚
â”‚ 5. Update telegram_handler  20 min     â”‚
â”‚ 6. Add feed scheduler       30 min     â”‚
â”‚ 7. Restart containers       5 min      â”‚
â”‚ 8. Test feed loading        10 min     â”‚
â”‚ 9. Test Telegram bot        30 min     â”‚
â”‚ 10. Verify all features     20 min     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL                       2h 20min   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

With testing and debugging: ~4-6 hours
Full day with monitoring setup: ~8 hours
```

---

## ğŸ¯ CRITICAL PATH

**ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ÑƒÑ‚ÑŒ Ğº Ğ·Ğ°Ğ¿ÑƒÑĞºÑƒ:**

```
START
  â†“
[1] Create .env variables
  â†“
[2] Start PostgreSQL container
  â†“
[3] Apply migrations
  â†“
[4] Uncomment imports in main.py
  â†“
[5] Add mode check in telegram_handler.py
  â†“
[6] Restart telegram-bot container
  â†“
[7] Test in Telegram
  â†“
END (Property Bot working!)
```

**Ğ”Ğ»Ñ production-ready:**

```
... (steps above) ...
  â†“
[8] Add APScheduler for feed updates
  â†“
[9] Setup monitoring (Prometheus)
  â†“
[10] Add alerting (Grafana)
  â†“
[11] Load testing
  â†“
END (Production ready!)
```

---

## ğŸ“Š READINESS MATRIX

| Component | Code | Config | Running | Tested | Production |
|-----------|------|--------|---------|--------|------------|
| Calendar Bot | âœ… | âœ… | âœ… | âœ… | âœ… |
| Property Models | âœ… | â– | â– | â– | âŒ |
| Property Service | âœ… | â– | â– | â– | âŒ |
| Feed Loader | âœ… | âš ï¸ | âŒ | âŒ | âŒ |
| PostgreSQL | âœ… | âš ï¸ | âŒ | âŒ | âŒ |
| Telegram Integration | âœ… | âŒ | âŒ | âŒ | âŒ |
| AI Services | âœ… | âš ï¸ | âš ï¸ | â– | âŒ |
| Monitoring | âŒ | âŒ | âŒ | âŒ | âŒ |

**Legend:**
- âœ… Complete
- âš ï¸ Partial
- âŒ Not done
- â– Not applicable

---

## ğŸ’¡ SUMMARY

**TL;DR:**

- âœ… **100% code ready** (8,500 lines)
- âŒ **0% infrastructure active**
- â±ï¸ **2 hours to basic working state**
- â±ï¸ **1 day to production-ready**
- ğŸ’° **~4,500â‚½/month operational cost**
- ğŸ”Œ **Fully isolated from Calendar Bot**
- ğŸ¯ **One Telegram token, two modes**

**Next step:** Follow [PROPERTY_BOT_ACTIVATION_PLAN.md](PROPERTY_BOT_ACTIVATION_PLAN.md)
