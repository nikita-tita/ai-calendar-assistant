# Бэклог проекта calendar.housler.ru

Единый источник правды для задач проекта.

**Последнее обновление:** 2026-01-09
**Источник:** Q1 2026 Ecosystem Review + README Known Issues

---

## Статусы задач

| Статус | Описание |
|--------|----------|
| `backlog` | В очереди, не приоритизировано |
| `todo` | Готово к взятию в работу |
| `in_progress` | В работе (указан исполнитель) |
| `blocked` | Заблокировано (указан блокер) |
| `review` | На ревью/тестировании |
| `done` | Выполнено, есть артефакт |

---

## Сводка

| Категория | Всего | Done | In Progress | Blocked | Todo |
|-----------|-------|------|-------------|---------|------|
| Безопасность (SEC) | 3 | 0 | 0 | 0 | 3 |
| Рефакторинг (REF) | 2 | 0 | 0 | 0 | 2 |
| Инфраструктура (INFRA) | 3 | 0 | 0 | 0 | 3 |
| Фичи (FEAT) | 4 | 0 | 0 | 0 | 4 |
| **Итого** | **12** | **0** | **0** | **0** | **12** |

---

## HIGH — Первый месяц

### SEC-001: Redis rate limiter
- **Статус:** `todo`
- **Приоритет:** HIGH
- **Источник:** README Known Issues
- **Описание:** Rate limiter хранит данные в памяти, при перезапуске сбрасывается
- **DoD:**
  - [ ] Redis добавлен в docker-compose
  - [ ] Rate limiter использует Redis backend
  - [ ] Конфигурация лимитов в .env
  - [ ] Тесты rate limiting
- **Сложность:** M (3-4 часа)
- **Ответственный:** Backend

### SEC-002: bcrypt для admin паролей
- **Статус:** `todo`
- **Приоритет:** HIGH
- **Источник:** README Known Issues
- **Описание:** Admin пароли используют SHA-256, рекомендуется bcrypt
- **DoD:**
  - [ ] bcrypt добавлен в requirements.txt
  - [ ] Hash функция заменена на bcrypt
  - [ ] Миграция существующих паролей
  - [ ] Тесты аутентификации
- **Сложность:** S (1-2 часа)

### SEC-003: Обновить зависимости
- **Статус:** `todo`
- **Приоритет:** HIGH
- **Источник:** README Known Issues
- **Описание:** Некоторые библиотеки устарели
- **DoD:**
  - [ ] pip-audit выполнен
  - [ ] Уязвимые пакеты обновлены
  - [ ] Тесты проходят
  - [ ] requirements.txt обновлён
- **Сложность:** S (1-2 часа)

### REF-001: Рефакторинг _handle_text
- **Статус:** `todo`
- **Приоритет:** HIGH
- **Источник:** README Known Issues
- **Описание:** Функция `_handle_text` слишком большая (869 строк)
- **Файл:** `ai-calendar-assistant/app/services/telegram_bot.py` (или аналог)
- **DoD:**
  - [ ] Функция разбита на подфункции
  - [ ] Каждая подфункция < 100 строк
  - [ ] Unit тесты для подфункций
  - [ ] Функционал не изменился
- **Сложность:** L (1-2 дня)

### INFRA-001: Настроить CI/CD для GitHub
- **Статус:** `todo`
- **Приоритет:** HIGH
- **Связь:** ECO-INFRA-005
- **Описание:** Проект использует GitLab CI, но репозиторий на GitHub
- **DoD:**
  - [ ] .github/workflows/ci.yml создан
  - [ ] Линтинг (ruff/flake8)
  - [ ] Тесты запускаются
  - [ ] Docker build проверяется
  - [ ] Security scan (bandit)
- **Сложность:** S (1-2 часа)

---

## MEDIUM — Месяц 2-3

### REF-002: Улучшить error handling
- **Статус:** `todo`
- **Приоритет:** MEDIUM
- **Описание:** Bare except blocks нужно заменить на специфичные
- **DoD:**
  - [ ] `except:` заменены на `except Exception:`
  - [ ] Логирование ошибок
  - [ ] User-friendly error messages
- **Сложность:** S (2-3 часа)

### INFRA-002: Добавить health check
- **Статус:** `todo`
- **Приоритет:** MEDIUM
- **Описание:** Улучшить /health endpoint
- **DoD:**
  - [ ] /health проверяет DB
  - [ ] /health проверяет Radicale
  - [ ] /health проверяет Telegram bot
  - [ ] Prometheus metrics
- **Сложность:** S (1-2 часа)

### INFRA-003: Structured logging
- **Статус:** `todo`
- **Приоритет:** MEDIUM
- **Описание:** structlog уже используется, но не везде
- **DoD:**
  - [ ] Все модули используют structlog
  - [ ] Correlation ID в логах
  - [ ] JSON формат в production
- **Сложность:** S (2-3 часа)

---

## LOW — Backlog (Roadmap v1.1-v1.2)

### FEAT-001: Google Calendar интеграция
- **Статус:** `backlog`
- **Приоритет:** LOW
- **Источник:** README Roadmap v1.2
- **Описание:** Двусторонняя синхронизация с Google Calendar
- **DoD:**
  - [ ] OAuth2 авторизация Google
  - [ ] Импорт событий из Google
  - [ ] Экспорт событий в Google
  - [ ] Конфликт-резолюция
- **Сложность:** XL (2-3 недели)

### FEAT-002: OCR для изображений расписаний
- **Статус:** `backlog`
- **Приоритет:** LOW
- **Источник:** README Roadmap v1.2
- **Описание:** Распознавание текста из фото расписаний
- **DoD:**
  - [ ] Tesseract или Google Vision интегрирован
  - [ ] Парсинг расписания из текста
  - [ ] Создание событий из распознанного
- **Сложность:** L (1-2 недели)

### FEAT-003: Telegram Mini App v2
- **Статус:** `backlog`
- **Приоритет:** LOW
- **Источник:** README Roadmap v1.2
- **Описание:** Расширенная версия Telegram Mini App
- **DoD:**
  - [ ] Календарь-вид в Mini App
  - [ ] Drag-n-drop событий
  - [ ] Быстрое создание
- **Сложность:** L (1-2 недели)

### FEAT-004: Web dashboard
- **Статус:** `backlog`
- **Приоритет:** LOW
- **Источник:** README Roadmap v2.0
- **Описание:** Отдельный веб-интерфейс (не Telegram)
- **DoD:**
  - [ ] Next.js/React frontend
  - [ ] Авторизация
  - [ ] Полный функционал календаря
- **Сложность:** XXL (1-2 месяца)

---

## Текущий статус безопасности

**Оценка:** ✅ **8.5/10** (Production Ready)

Исправлено после security review:
- [x] Убраны дефолтные SECRET_KEY и пароли
- [x] DEBUG=False по умолчанию
- [x] .env не попадает в Docker образ
- [x] Добавлена валидация секретов в production
- [x] Исправлены bare except blocks
- [x] Добавлена ротация логов

---

## Связи с другими бэклогами

| Экосистемная задача | Связанная задача |
|---------------------|------------------|
| ECO-INFRA-005 | INFRA-001 |
| ECO-SEC-006 | SEC-001 (Redis rate limiting) |

---

*Этот файл — источник правды для задач calendar.housler.ru*
