# –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê: WebApp –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ 1 –Ω–æ—è–±—Ä—è –≤–º–µ—Å—Ç–æ 29 –Ω–æ—è–±—Ä—è

**–î–∞—Ç–∞**: 2025-11-29 16:00
**–°—Ç–∞—Ç—É—Å**: –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê –ù–ê–ô–î–ï–ù–ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í–´–°–û–ö–ò–ô

---

## –ò–°–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û–ï –†–ï–ó–Æ–ú–ï

**–ü—Ä–æ–±–ª–µ–º–∞**: WebApp –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ 1 –Ω–æ—è–±—Ä—è –≤–º–µ—Å—Ç–æ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ –¥–Ω—è (29 –Ω–æ—è–±—Ä—è)

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞**: –î–Ω–∏ –ë–ï–ó —Å–æ–±—ã—Ç–∏–π –ù–ï —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –≤ DOM (—Å—Ç—Ä–æ–∫–∞ 688 index.html)
- –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ù–ï–¢ —Å–æ–±—ã—Ç–∏–π –Ω–∞ 29 –Ω–æ—è–±—Ä—è
- –õ–æ–≥–∏–∫–∞ —Å–∫—Ä–æ–ª–ª–∞ –∏—â–µ—Ç –±–ª–∏–∂–∞–π—à—É—é –¥–∞—Ç—É
- –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Ç—å 28 –∏–ª–∏ 30 –Ω–æ—è–±—Ä—è (1 –¥–µ–Ω—å —Ä–∞–∑–Ω–∏—Ü—ã)
- –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤—ã–±–∏—Ä–∞–µ—Ç 1 –Ω–æ—è–±—Ä—è (28 –¥–Ω–µ–π —Ä–∞–∑–Ω–∏—Ü—ã)

**–í–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –≤—ã–±–æ—Ä–∞ 1 –Ω–æ—è–±—Ä—è**:
1. **Timezone mismatch** –º–µ–∂–¥—É `new Date(string)` (UTC) –∏ `new Date()` (local)
2. **–ü–æ—Ä—è–¥–æ–∫ –æ–±—Ö–æ–¥–∞ DOM** - –µ—Å–ª–∏ —Å–æ–±—ã—Ç–∏—è –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
3. **–ü—Ä–æ–±–ª–µ–º–∞ —Å getTime()** –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ –¥–∞—Ç

---

## –î–ï–¢–ê–õ–¨–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

### 1. –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û ‚úÖ

**–ö–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω**:
```bash
$ ssh root@server 'docker exec ai-calendar-assistant wc -l /app/app/static/index.html'
976 /app/app/static/index.html

$ curl -s https://calendar.housler.ru/app | grep -o "APP_VERSION = '[^']*'"
APP_VERSION = '2025-10-28-18:15'
```

**–õ–æ–≥–∏–∫–∞ —Å–∫—Ä–æ–ª–ª–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç** (—Å—Ç—Ä–æ–∫–∏ 910-935):
```javascript
// Try exact match first
const todayKey = "2025-11-29";
let targetSection = document.querySelector(`[data-date="2025-11-29"]`);

// If no exact match, find closest date (minimum time difference)
if (!targetSection) {
    const allSections = Array.from(document.querySelectorAll('[data-date]'));
    let minDiff = Infinity;
    allSections.forEach(section => {
        const sectionDate = new Date(section.getAttribute('data-date'));
        const diff = Math.abs(sectionDate.getTime() - today.getTime());
        if (diff < minDiff) {
            minDiff = diff;
            targetSection = section;
        }
    });
}
```

**–î–∞—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è**:
```bash
$ ssh root@server "date"
Sat Nov 29 15:54:46 MSK 2025

$ ssh root@server "docker exec ai-calendar-assistant date"
Sat Nov 29 12:54:52 UTC 2025
```

**–°–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è @nikita_tita** (–∫–∞–ª–µ–Ω–¥–∞—Ä—å `b015a8fa-b508-11f0-9f52-fa38916a93fd`):
```
–ù–æ—è–±—Ä—å 2025:
- 1 –Ω–æ—è–±—Ä—è: 7 —Å–æ–±—ã—Ç–∏–π (07:00, 09:00, 11:00, 14:00, 16:00, 18:00, 18:30)
- 2 –Ω–æ—è–±—Ä—è: 2 —Å–æ–±—ã—Ç–∏—è
- 3 –Ω–æ—è–±—Ä—è: 4 —Å–æ–±—ã—Ç–∏—è
- 4 –Ω–æ—è–±—Ä—è: 1 —Å–æ–±—ã—Ç–∏–µ
- 5-9 –Ω–æ—è–±—Ä—è: –ù–ï–¢ —Å–æ–±—ã—Ç–∏–π
- 10 –Ω–æ—è–±—Ä—è: 1 —Å–æ–±—ã—Ç–∏–µ
- 11 –Ω–æ—è–±—Ä—è: 5 —Å–æ–±—ã—Ç–∏–π
- 12 –Ω–æ—è–±—Ä—è: 3 —Å–æ–±—ã—Ç–∏—è
- 13-16 –Ω–æ—è–±—Ä—è: –ù–ï–¢ —Å–æ–±—ã—Ç–∏–π
- 17 –Ω–æ—è–±—Ä—è: 4 —Å–æ–±—ã—Ç–∏—è
- 18-23 –Ω–æ—è–±—Ä—è: –ù–ï–¢ —Å–æ–±—ã—Ç–∏–π
- 24 –Ω–æ—è–±—Ä—è: 2 —Å–æ–±—ã—Ç–∏—è
- 25 –Ω–æ—è–±—Ä—è: 1 —Å–æ–±—ã—Ç–∏–µ
- 26 –Ω–æ—è–±—Ä—è: –ù–ï–¢ —Å–æ–±—ã—Ç–∏–π
- 27 –Ω–æ—è–±—Ä—è: 3 —Å–æ–±—ã—Ç–∏—è
- 28 –Ω–æ—è–±—Ä—è: 3 —Å–æ–±—ã—Ç–∏—è
- 29 –Ω–æ—è–±—Ä—è: 0 —Å–æ–±—ã—Ç–∏–π ‚Üê –°–ï–ì–û–î–ù–Ø, –ë–ï–ó –°–û–ë–´–¢–ò–ô!
- 30 –Ω–æ—è–±—Ä—è: 2 —Å–æ–±—ã—Ç–∏—è
```

---

### 2. –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**–°—Ç—Ä–æ–∫–∞ 688** –≤ `index.html`:
```javascript
${dateKeys.map(dateKey => {
    const dayEvents = grouped[dateKey];
    if (dayEvents.length === 0) return '';  // ‚Üê –î–ù–ò –ë–ï–ó –°–û–ë–´–¢–ò–ô –ù–ï –†–ï–ù–î–ï–†–Ø–¢–°–Ø!

    const [y, m, d] = dateKey.split('-').map(Number);
    const dayDate = new Date(y, m - 1, d);
    const isToday = sameDay(dayDate, new Date());

    return `
        <div class="day-separator" data-date="${dateKey}">
            ${fmtDate(dayDate)} ${isToday ? 'üîµ' : ''} ‚Äî ${dayEvents.length} —Å–æ–±—ã—Ç–∏–π
        </div>
        ...
    `;
}).join('')}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- `querySelectorAll('[data-date]')` –Ω–∞—Ö–æ–¥–∏—Ç –¢–û–õ–¨–ö–û –¥–Ω–∏ –° —Å–æ–±—ã—Ç–∏—è–º–∏
- 29 –Ω–æ—è–±—Ä—è –ù–ï–¢ –≤ DOM ‚Üí fallback –ª–æ–≥–∏–∫–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
- –ò—â–µ—Ç –±–ª–∏–∂–∞–π—à—É—é –¥–∞—Ç—É —Å—Ä–µ–¥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤ DOM

---

### 3. –ú–ê–¢–ï–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó

**–î–∞—Ç—ã –≤ DOM** (—Ç–æ–ª—å–∫–æ —Å —Å–æ–±—ã—Ç–∏—è–º–∏):
```
2025-11-01, 2025-11-02, 2025-11-03, 2025-11-04,
2025-11-10, 2025-11-11, 2025-11-12,
2025-11-17,
2025-11-24, 2025-11-25,
2025-11-27, 2025-11-28,
2025-11-30,
2025-12-01, ...
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç 29 –Ω–æ—è–±—Ä—è**:
```
|1 –Ω–æ—è–±—Ä—è - 29 –Ω–æ—è–±—Ä—è| = 28 –¥–Ω–µ–π
|2 –Ω–æ—è–±—Ä—è - 29 –Ω–æ—è–±—Ä—è| = 27 –¥–Ω–µ–π
...
|27 –Ω–æ—è–±—Ä—è - 29 –Ω–æ—è–±—Ä—è| = 2 –¥–Ω—è
|28 –Ω–æ—è–±—Ä—è - 29 –Ω–æ—è–±—Ä—è| = 1 –¥–µ–Ω—å  ‚Üê –î–û–õ–ñ–ï–ù –ë–´–¢–¨ –í–´–ë–†–ê–ù!
|30 –Ω–æ—è–±—Ä—è - 29 –Ω–æ—è–±—Ä—è| = 1 –¥–µ–Ω—å  ‚Üê –ò–õ–ò –≠–¢–û–¢!
|1 –¥–µ–∫–∞–±—Ä—è - 29 –Ω–æ—è–±—Ä—è| = 2 –¥–Ω—è
```

**–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏**: 28 –Ω–æ—è–±—Ä—è –ò–õ–ò 30 –Ω–æ—è–±—Ä—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω—ã (1 –¥–µ–Ω—å —Ä–∞–∑–Ω–∏—Ü—ã).

---

### 4. –ü–û–ß–ï–ú–£ –í–´–ë–ò–†–ê–ï–¢–°–Ø 1 –ù–û–Ø–ë–†–Ø? (–ì–ò–ü–û–¢–ï–ó–´)

#### –ì–∏–ø–æ—Ç–µ–∑–∞ 1: **Timezone Mismatch**

**JavaScript –ø–æ–≤–µ–¥–µ–Ω–∏–µ**:
```javascript
// –í –±—Ä–∞—É–∑–µ—Ä–µ (Moscow Time, UTC+3):
const today = new Date();              // Sat Nov 29 2025 16:00:00 GMT+0300
today.setHours(0, 0, 0, 0);           // Sat Nov 29 2025 00:00:00 GMT+0300
                                       // = Fri Nov 28 2025 21:00:00 UTC

// –ü—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ data-date:
new Date("2025-11-01")                 // Sat Nov 01 2025 00:00:00 UTC
                                       // = Sat Nov 01 2025 03:00:00 GMT+0300

new Date("2025-11-28")                 // Fri Nov 28 2025 00:00:00 UTC
                                       // = Fri Nov 28 2025 03:00:00 GMT+0300

new Date("2025-11-30")                 // Sun Nov 30 2025 00:00:00 UTC
                                       // = Sun Nov 30 2025 03:00:00 GMT+0300
```

**–†–∞–∑–Ω–∏—Ü–∞ –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏**:
```
today.getTime() = Nov 28 21:00 UTC

|Nov 01 00:00 UTC - Nov 28 21:00 UTC| = 27 days 21 hours = 2397600000 ms
|Nov 28 00:00 UTC - Nov 28 21:00 UTC| = 21 hours = 75600000 ms  ‚Üê –ú–ò–ù–ò–ú–£–ú!
|Nov 30 00:00 UTC - Nov 28 21:00 UTC| = 1 day 3 hours = 97200000 ms
```

**–í—ã–≤–æ–¥**: –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ 28 –Ω–æ—è–±—Ä—è –í–°–Å –†–ê–í–ù–û –±–ª–∏–∂–µ! Timezone –ù–ï –æ–±—ä—è—Å–Ω—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—É.

---

#### –ì–∏–ø–æ—Ç–µ–∑–∞ 2: **–ü–æ—Ä—è–¥–æ–∫ –û–±—Ö–æ–¥–∞ DOM**

**–ö–æ–¥**:
```javascript
allSections.forEach(section => {
    const sectionDate = new Date(section.getAttribute('data-date'));
    const diff = Math.abs(sectionDate.getTime() - today.getTime());
    if (diff < minDiff) {  // –°–¢–†–û–ì–û –º–µ–Ω—å—à–µ
        minDiff = diff;
        targetSection = section;
    }
});
```

**–ï—Å–ª–∏** `allSections` –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ –û–ë–†–ê–¢–ù–û–ú –ø–æ—Ä—è–¥–∫–µ (Dec 30, Dec 29, ..., Nov 30, Nov 28, ..., Nov 1):
- –û–±—Ö–æ–¥ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –¥–µ–∫–∞–±—Ä—è
- –î–æ—Ö–æ–¥–∏—Ç –¥–æ Nov 30 (1 day 3h) ‚Üí –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç targetSection = Nov 30
- –î–æ—Ö–æ–¥–∏—Ç –¥–æ Nov 28 (21h) ‚Üí –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç targetSection = Nov 28  ‚Üê –î–û–õ–ñ–ï–ù –ë–´–¢–¨ –í–´–ë–†–ê–ù!
- –î–æ—Ö–æ–¥–∏—Ç –¥–æ Nov 1 (27d 21h) ‚Üí –ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç (diff > minDiff)

**–í—ã–≤–æ–¥**: –î–∞–∂–µ –ø—Ä–∏ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ 28 –Ω–æ—è–±—Ä—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω!

---

#### –ì–∏–ø–æ—Ç–µ–∑–∞ 3: **–ü—Ä–æ–±–ª–µ–º–∞ —Å –ü–∞—Ä—Å–∏–Ω–≥–æ–º –î–∞—Ç—ã**

**–í–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**:
```javascript
const sectionDate = new Date(section.getAttribute('data-date'));
```

–ï—Å–ª–∏ `data-date` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
```html
<div data-date="undefined">
<div data-date="">
<div data-date="2025-11-01T00:00:00Z">
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `data-date` –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π.

---

#### –ì–∏–ø–æ—Ç–µ–∑–∞ 4: **–ö—ç—à –ë—Ä–∞—É–∑–µ—Ä–∞ Telegram**

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª**: "–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é —è —Å–º–æ—Ç—Ä—é –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö"

**–ù–û**: –í–µ—Ä—Å–∏—è `APP_VERSION = '2025-10-28-18:15'` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**Telegram WebApp –∫—ç—à–∏—Ä—É–µ—Ç**:
- JavaScript –∫–æ–¥
- HTML  —Ä–∞–∑–º–µ—Ç–∫—É
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**:
1. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à Telegram
2. –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Telegram
3. –û—Ç–∫—Ä—ã—Ç—å WebApp –≤ –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ (–Ω–µ –≤ Telegram)

---

#### –ì–∏–ø–æ—Ç–µ–∑–∞ 5: **–°–æ–±—ã—Ç–∏—è –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ù–µ –ü–æ–ª–Ω–æ—Å—Ç—å—é**

**–õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏** (—Å—Ç—Ä–æ–∫–∏ 612-615):
```javascript
const fromDate = new Date(state.selectedDate);
fromDate.setDate(fromDate.getDate() - 30);  // -30 –¥–Ω–µ–π –æ—Ç —Å–µ–≥–æ–¥–Ω—è
fromDate.setHours(0,0,0,0);
const grouped = groupEventsByDay(state.events, fromDate, 90);  // -30...+60 –¥–Ω–µ–π
```

–ï—Å–ª–∏ `state.selectedDate` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- `state.selectedDate = new Date("2025-11-01")` (–≤–º–µ—Å—Ç–æ today)
- fromDate = Nov 1 - 30 = Oct 2
- –î–∏–∞–ø–∞–∑–æ–Ω: Oct 2 ... Dec 30
- –ù–æ —Å–æ–±—ã—Ç–∏—è 28-30 –Ω–æ—è–±—Ä—è –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞—Å—Ç—å –≤ —ç—Ç–æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω!

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `state.selectedDate` –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

---

### 5. –†–ï–ê–õ–¨–ù–ê–Ø –ü–†–ò–ß–ò–ù–ê (–ù–ê–ò–ë–û–õ–ï–ï –í–ï–†–û–Ø–¢–ù–ê–Ø)

**–Ø –ù–ï –ú–û–ì–£ –¢–û–ß–ù–û –û–ü–†–ï–î–ï–õ–ò–¢–¨** –±–µ–∑ browser console logs.

**–ù—É–∂–Ω—ã –ª–æ–≥–∏**:
```javascript
console.log('Today:', today);
console.log('TodayKey:', todayKey);
console.log('All data-date attributes:',
    Array.from(document.querySelectorAll('[data-date]'))
        .map(s => s.getAttribute('data-date'))
);
console.log('Calculated diffs:',
    Array.from(document.querySelectorAll('[data-date]'))
        .map(s => {
            const date = new Date(s.getAttribute('data-date'));
            const diff = Math.abs(date.getTime() - today.getTime());
            return {date: s.getAttribute('data-date'), diff: diff, diffDays: diff / 86400000};
        })
        .sort((a,b) => a.diff - b.diff)
);
console.log('Selected section:', targetSection?.getAttribute('data-date'));
```

---

## –†–ï–®–ï–ù–ò–ï

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–û–ë–ê–í–ò–¢–¨ –û–¢–õ–ê–î–û–ß–ù–´–ï –õ–û–ì–ò (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–¶–µ–ª—å**: –ü–æ–Ω—è—Ç—å –ß–¢–û —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `index.html` (—Å—Ç—Ä–æ–∫–∏ 910-935)**:
```javascript
// Auto-scroll to today's date (or closest future date) on list view
if (state.view === 'list') {
    const scrollToToday = () => {
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        const todayKey = `${today.getFullYear()}-${String(today.getMonth()+1).padStart(2,'0')}-${String(today.getDate()).padStart(2,'0')}`;

        // DEBUG LOGS
        console.log('[SCROLL DEBUG] Today:', today.toISOString(), 'TodayKey:', todayKey);

        let targetSection = document.querySelector(`[data-date="${todayKey}"]`);

        if (!targetSection) {
            const allSections = Array.from(document.querySelectorAll('[data-date]'));

            // DEBUG: Show all sections
            console.log('[SCROLL DEBUG] All sections:',
                allSections.map(s => s.getAttribute('data-date')));

            let minDiff = Infinity;
            const diffs = [];  // DEBUG

            allSections.forEach(section => {
                const sectionDate = new Date(section.getAttribute('data-date'));
                const diff = Math.abs(sectionDate.getTime() - today.getTime());

                // DEBUG: Record all diffs
                diffs.push({
                    date: section.getAttribute('data-date'),
                    diff: diff,
                    diffDays: (diff / 86400000).toFixed(2)
                });

                if (diff < minDiff) {
                    minDiff = diff;
                    targetSection = section;
                }
            });

            // DEBUG: Show calculations
            console.log('[SCROLL DEBUG] Calculated diffs:',
                diffs.sort((a,b) => a.diff - b.diff).slice(0, 5));
            console.log('[SCROLL DEBUG] Selected:', targetSection?.getAttribute('data-date'));
        }

        if (targetSection) {
            console.log('[SCROLL DEBUG] Scrolling to:', targetSection.getAttribute('data-date'));
            targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            return true;
        }
        return false;
    };
    setTimeout(scrollToToday, 100);
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –¢–æ—á–Ω–æ –ø–æ–∫–∞–∂–µ—Ç —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
- –ù–∞–π–¥–µ–º —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–∏—á–∏–Ω—É
- –ù–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ù—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å Developer Tools –≤ Telegram WebApp
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –ø—Ä–∏—Å–ª–∞—Ç—å screenshot –ª–æ–≥–æ–≤

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò–ó–ú–ï–ù–ò–¢–¨ –õ–û–ì–ò–ö–£ –ù–ê "–ë–õ–ò–ñ–ê–ô–®–ê–Ø –ë–£–î–£–©–ê–Ø –î–ê–¢–ê"

**–°—É—Ç—å**: –í–º–µ—Å—Ç–æ `Math.abs()` –∏—Å–∫–∞—Ç—å –ø–µ—Ä–≤—É—é –¥–∞—Ç—É >= today.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
```javascript
// If no exact match, find closest FUTURE date
if (!targetSection) {
    const allSections = Array.from(document.querySelectorAll('[data-date]'));

    // Sort sections by date
    allSections.sort((a, b) => {
        const dateA = new Date(a.getAttribute('data-date'));
        const dateB = new Date(b.getAttribute('data-date'));
        return dateA - dateB;
    });

    // Find first future date
    for (const section of allSections) {
        const sectionDate = new Date(section.getAttribute('data-date'));
        if (sectionDate >= today) {
            targetSection = section;
            break;
        }
    }

    // If no future date, use last section (most recent past)
    if (!targetSection && allSections.length > 0) {
        targetSection = allSections[allSections.length - 1];
    }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –õ–æ–≥–∏—á–Ω–µ–µ: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –±—É–¥—É—â–∏–µ —Å–æ–±—ã—Ç–∏—è, –∞ –Ω–µ –ø—Ä–æ—à–ª—ã–µ
- –ü—Ä–æ—â–µ –ª–æ–≥–∏–∫–∞
- –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç timezone

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ï—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π, –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç –∫ –ó–ê–í–¢–†–ê, –∞ –Ω–µ –∫ –≤—á–µ—Ä–∞
- –ù–µ —Ä–µ—à–∞–µ—Ç –∫–æ—Ä–Ω–µ–≤—É—é –ø—Ä–æ–±–ª–µ–º—É (–Ω–µ –ø–æ–Ω—è—Ç–Ω–æ –ø–æ—á–µ–º—É 1 –Ω–æ—è–±—Ä—è)

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –í–°–ï–ì–î–ê –°–û–ó–î–ê–í–ê–¢–¨ –°–ï–ö–¶–ò–Æ –î–õ–Ø –°–ï–ì–û–î–ù–Ø

**–°—É—Ç—å**: –î–∞–∂–µ –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π –Ω–∞ —Å–µ–≥–æ–¥–Ω—è, —Å–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç—É—é —Å–µ–∫—Ü–∏—é —Å `data-date` –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç—Ä–æ–∫–µ 688**:
```javascript
${dateKeys.map(dateKey => {
    const dayEvents = grouped[dateKey];
    const [y, m, d] = dateKey.split('-').map(Number);
    const dayDate = new Date(y, m - 1, d);
    const isToday = sameDay(dayDate, new Date());

    // Skip empty days UNLESS it's today
    if (dayEvents.length === 0 && !isToday) return '';

    // Render section (even if empty, for today)
    return `
        <div class="day-separator py-2 px-2 font-semibold text-sm ${isToday ? 'bg-blue-500/20 rounded-lg' : ''}" data-date="${dateKey}">
            ${fmtDate(dayDate)} ${isToday ? 'üîµ –°–µ–≥–æ–¥–Ω—è' : ''} ‚Äî ${dayEvents.length > 0 ? dayEvents.length + ' —Å–æ–±—ã—Ç–∏–π' : '—Å–æ–±—ã—Ç–∏–π –Ω–µ—Ç'}
        </div>
        ${dayEvents.map(e => `...event cards...`).join('')}
    `;
}).join('')}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –°–∫—Ä–æ–ª–ª –í–°–ï–ì–î–ê –Ω–∞—Ö–æ–¥–∏—Ç —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç "–°–µ–≥–æ–¥–Ω—è ‚Äî —Å–æ–±—ã—Ç–∏–π –Ω–µ—Ç" (–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ)
- Fallback –ª–æ–≥–∏–∫–∞ –ù–ï —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ù–µ —Ä–µ—à–∞–µ—Ç –∑–∞–≥–∞–¥–∫—É "–ø–æ—á–µ–º—É fallback –≤—ã–±–∏—Ä–∞–µ—Ç 1 –Ω–æ—è–±—Ä—è"

---

### –í–∞—Ä–∏–∞–Ω—Ç 4: –ö–û–ú–ë–ò–ù–ò–†–û–í–ê–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï (–õ–£–ß–®–ò–ô)

**–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å** –í–∞—Ä–∏–∞–Ω—Ç 1 (DEBUG –ª–æ–≥–∏) + –í–∞—Ä–∏–∞–Ω—Ç 3 (—Å–µ–∫—Ü–∏—è –¥–ª—è —Å–µ–≥–æ–¥–Ω—è):

1. –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é –¥–ª—è —Å–µ–≥–æ–¥–Ω—è ‚Üí —Å–∫—Ä–æ–ª–ª –¢–û–ß–ù–û —Å—Ä–∞–±–æ—Ç–∞–µ—Ç
2. –î–æ–±–∞–≤–∏—Ç—å DEBUG –ª–æ–≥–∏ –≤ fallback ‚Üí –µ—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ 1 –Ω–æ—è–±—Ä—è, —É–≤–∏–¥–∏–º –ø–æ—á–µ–º—É

---

## –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –®–∞–≥ 1: –î–û–ë–ê–í–ò–¢–¨ DEBUG –õ–û–ì–ò + –°–ï–ö–¶–ò–Æ –î–õ–Ø –°–ï–ì–û–î–ù–Ø

1. –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É 688 - —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ–∫—Ü–∏—é –¥–ª—è —Å–µ–≥–æ–¥–Ω—è, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π
2. –î–æ–±–∞–≤–∏—Ç—å console.log –≤ fallback –ª–æ–≥–∏–∫—É (—Å—Ç—Ä–æ–∫–∏ 922-931)
3. –û–±–Ω–æ–≤–∏—Ç—å APP_VERSION = '2025-11-29-16:00'
4. Deploy –Ω–∞ prod
5. Rebuild –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### –®–∞–≥ 2: –ü–†–û–í–ï–†–ò–¢–¨

1. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à Telegram (Settings ‚Üí Data and Storage ‚Üí Clear Cache)
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Telegram
3. –û—Ç–∫—Ä—ã—Ç—å WebApp
4. –û—Ç–∫—Ä—ã—Ç—å Developer Tools (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ –≤ Telegram)
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å console.log - –∫—É–¥–∞ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç?

### –®–∞–≥ 3: –ê–ù–ê–õ–ò–ó –†–ï–ó–£–õ–¨–¢–ê–¢–û–í

**–ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ 29 –Ω–æ—è–±—Ä—è** ‚úÖ:
- –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ (–±—ã–ª–∞ –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–µ–∫—Ü–∏–∏ –¥–ª—è —Å–µ–≥–æ–¥–Ω—è)
- –£–¥–∞–ª–∏—Ç—å DEBUG –ª–æ–≥–∏
- –ó–∞–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É

**–ï—Å–ª–∏ –í–°–Å –†–ê–í–ù–û –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ 1 –Ω–æ—è–±—Ä—è** ‚ùå:
- –ò–∑—É—á–∏—Ç—å console.log
- –ù–∞–π—Ç–∏ —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–∏—á–∏–Ω—É –≤ –ª–æ–≥–∞—Ö
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ü–µ–ª–µ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

---

## –í–†–ï–ú–Ø –ù–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

- **–í–∞—Ä–∏–∞–Ω—Ç 1 (DEBUG –ª–æ–≥–∏)**: 10 –º–∏–Ω—É—Ç
- **–í–∞—Ä–∏–∞–Ω—Ç 3 (—Å–µ–∫—Ü–∏—è –¥–ª—è —Å–µ–≥–æ–¥–Ω—è)**: 10 –º–∏–Ω—É—Ç
- **–í–∞—Ä–∏–∞–Ω—Ç 4 (–∫–æ–º–±–æ)**: 15 –º–∏–Ω—É—Ç
- **Rebuild + deploy**: 5 –º–∏–Ω—É—Ç

**–ò—Ç–æ–≥–æ**: 20 –º–∏–Ω—É—Ç –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞.

---

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ü—Ä–æ–±–ª–µ–º–∞**: WebApp –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ 1 –Ω–æ—è–±—Ä—è –≤–º–µ—Å—Ç–æ 29 –Ω–æ—è–±—Ä—è

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞ (—á–∞—Å—Ç–∏—á–Ω–∞—è)**: –î–Ω–∏ –±–µ–∑ —Å–æ–±—ã—Ç–∏–π –ù–ï —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –≤ DOM ‚Üí fallback –ª–æ–≥–∏–∫–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**–ó–∞–≥–∞–¥–∫–∞**: –ü–æ—á–µ–º—É fallback –≤—ã–±–∏—Ä–∞–µ—Ç 1 –Ω–æ—è–±—Ä—è (28 –¥–Ω–µ–π), –∞ –Ω–µ 28 –Ω–æ—è–±—Ä—è (1 –¥–µ–Ω—å)?

**–ì–∏–ø–æ—Ç–µ–∑—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã**:
- ‚ùå Timezone mismatch - –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –Ω–µ —Å—Ö–æ–¥–∏—Ç—Å—è
- ‚ùå –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ö–æ–¥–∞ - –Ω–µ –¥–æ–ª–∂–Ω–æ –≤–ª–∏—è—Ç—å
- ‚ùì –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç - –Ω—É–∂–Ω—ã –ª–æ–≥–∏
- ‚ùì –ö—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ - –Ω—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å
- ‚ùì –ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–±—ã—Ç–∏–π - –Ω—É–∂–Ω—ã –ª–æ–≥–∏

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: –í–∞—Ä–∏–∞–Ω—Ç 4 (–∫–æ–º–±–æ)
1. –°–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ–∫—Ü–∏—é –¥–ª—è —Å–µ–≥–æ–¥–Ω—è –≤—Å–µ–≥–¥–∞ (fix –ø—Ä–æ–±–ª–µ–º—ã)
2. –î–æ–±–∞–≤–∏—Ç—å DEBUG –ª–æ–≥–∏ (–ø–æ–Ω—è—Ç—å –∑–∞–≥–∞–¥–∫—É)

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ü–æ–ª—É—á–∏—Ç—å –æ–¥–æ–±—Ä–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ deploy –í–∞—Ä–∏–∞–Ω—Ç–∞ 4.

---

**–ê–≤—Ç–æ—Ä**: Claude Code
**–î–∞—Ç–∞**: 2025-11-29
**–í—Ä–µ–º—è –Ω–∞ –∞–Ω–∞–ª–∏–∑**: 90 –º–∏–Ω—É—Ç
**–§–∞–π–ª–æ–≤ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ**: 6
**–õ–æ–≥–æ–≤ –∏–∑—É—á–µ–Ω–æ**: 50+ —Å—Ç—Ä–æ–∫
